//<script>
if (!(window.bouncex&&bouncex.website)) { 
	(function(){ 		var pushedData = [];
	 	if(window.bouncex && bouncex.push && bouncex.length){	 		pushedData = bouncex;
	 	} 
	 	window.bouncex = {};
	 	bouncex.pushedData = pushedData;
	 	
		bouncex.website = {"ei":1,"ally":0,"cookie_name":"bounceClientVisit1115","vars":{"seen_bx":{"polling":"none","persist":"no","val":"bouncex.cookie.as>0","default":"false"},"bx_qa":{"polling":"none","persist":"visit","val":"window.location.href.indexOf('bx_qa') > -1 || null;","default":"false"}},"acts":[],"pi":1000,"ct":"bind_to_domain","tcjs":"","cjs":"","PMI":500,"PDI":1000,"PMR":30,"force_https":false,"waypoints":false,"content_width":"0","gai":"","swids":null,"ots":0,"sd":0,"ljq":"auto","aco":{"first_party_limit":"3500"},"id":1115,"campaign_id":0,"uwc":1,"domain":"caspersleep.com","BCU":"\/\/assets.bounceexchange.com\/assets\/bounce\/css\/bouncev2.83783e1938.css","biu":"assets.bounceexchange.com","dgu":"pixel.cdnwidget.com","dge":false,"dgs":null,"bau":"api.bounceexchange.com","ple":false,"fbe":false,"beu":"events.bounceexchange.com","is_preview":false,"mas":2,"map":1,"gar":true,"casl":false,"gbi_enabled":0,"burls":[],"ibx":{"cjs":"","miw":"0","mibcx":0,"te":0,"tjs":"","cart_rep":{"get":"","set":""},"ulpj":[]},"ba":{"enabled":0,"fbte":0}};
		bouncex.tag = 'tag2';
		bouncex.v2css = '';
		bouncex.$ = window.jQuery;
		bouncex.env = 'production';
		var bcx_init=function(){perf.times("bcx_init");init_browser();if(!can_init())return;init_public_functions();bouncex.local_storage_enabled=bouncex.website.aco.local_storage;bouncex.cookie_too_large=false;if(!bouncex.local_storage_enabled&&bouncex.website.ct!="multi_cookie")if(!checkCookieEligibility())bouncex.cookie_too_large=true;var proto=bouncex.website.force_https?"https:":window.location.protocol;bouncex.sau="https://"+bouncex.website.bau;bouncex.seu="https://"+bouncex.website.beu;bouncex.au=
proto+"//"+bouncex.website.bau;bouncex.eu=proto+"//"+bouncex.website.beu;init_cookie_functions();var referrer=document.referrer;bouncex.referrer="";bouncex.is_google_pla=0;if(referrer){bouncex.referrer=encodeURIComponent(referrer.split("/")[2]);if(referrer.indexOf("google.")>-1)bouncex.is_google_pla=+(referrer.indexOf("ctype=5")>-1)}bouncex.calling_url=encodeURIComponent(window.location.href);bouncex.ssl=window.location.protocol=="https:";init_visit_cookie();bouncex.cookie_domain=false;if(bouncex.website.uwc||
bouncex.website.ct=="multi_cookie"||bouncex.website.ct=="fp_local_storage")if(bouncex.calling_url.indexOf(bouncex.website.domain)>0)bouncex.cookie_domain=bouncex.website.domain;init_ibx();if(bouncex.website.ba.enabled)initBa();if(bouncex.website.is_preview){var wsize=wndsize();var resolution=wsize.width+"x"+wsize.height;baddjs(bouncex.au+"/bounce/initp.js?campaign_id="+bouncex.website.campaign_id+"&resolution="+resolution)}else if(!bouncex.local_storage_enabled&&!bouncex.local_storage_initialized)init_post_cookie();
else;bouncex.eventLog=[];bouncex.passiveEventRegistry={};if(sessionStorage){var bxDashUrl=sessionStorage.getItem("bxDashUrl");if(bxDashUrl&&bxDashUrl.indexOf("bounceexchange.com")!==-1)baddjs(bxDashUrl)}};
function init_post_cookie(){init_cookie();perf.times("init_post_cookie");bouncex.cookieReady=true;initPushedData();initBehavioralPush();if(typeof window.bxconv==="object")report_conversion_sync(window.bxconv);bcxReady(function(){init_vars();if(bouncex.website.gbi_enabled)bouncex.website.gbi_enabled=canShowGbi();bcx_str=make_include_string();baddjs(bcx_str)})}
function processPushedData(eventName,metadata){metadata=metadata||{};if(eventName=="conversion")report_conversion_sync(metadata,"pushdata");else if(eventName=="bx-load-hide")bouncex.usd=metadata;else{var sanitizedEventName=eventName.trim().toLowerCase();var sanitizedMetadata={};for(k in metadata)if(metadata.hasOwnProperty(k)){var sanitizedKey=k.trim().toLowerCase();if(sanitizedKey.indexOf(":")===-1)sanitizedKey=sanitizedEventName+":"+sanitizedKey;var sanitizedValue=metadata[k];if(typeof sanitizedValue===
"string")sanitizedValue=sanitizedValue.trim();sanitizedMetadata[sanitizedKey]=sanitizedValue}event_stream_report(sanitizedEventName,sanitizedMetadata)}}function initPushedData(){var pushedDataLength=bouncex.pushedData.length;for(var i=0;i<pushedDataLength;i++)processPushedData(bouncex.pushedData[i][0],bouncex.pushedData[i][1]);bouncex.pushedData=[]}bouncex.push=function(pushData){if(bouncex.cookieReady)processPushedData(pushData[0],pushData[1]);else bouncex.pushedData.push(pushData)};
function can_init(){if(document.visibilityState)if(document.visibilityState==="prerender"){addEvent(document,"visibilitychange",function visibilityListener(){if(document.visibilityState!=="prerender"){removeEvent(document,"visibilitychange",visibilityListener);bcx_init()}});bouncex.prerendered=true;return false}if(bouncex.baddjs)return false;if(!JSON.parse)return false;if(!window["postMessage"])return false;if(!bouncex.website.ei&&window!=window.top)return false;if(!areCookiesEnabled())return false;
if(bouncex.browser.prerenderio)return false;if(bouncex.browser.msie&&bouncex.browser.msie<11)return false;if(bouncex.website.burls.length)for(var k in bouncex.website.burls)if(bouncex.website.burls.hasOwnProperty(k)){var burl=bouncex.website.burls[k];if(burl.prop.indexOf("contains")!=-1){var c=window.location.href.indexOf(burl.val);if(burl.prop=="contains"&&c!=-1||burl.prop=="not_contains"&&c==-1)return false}else if(burl.prop.indexOf("regex_match")!=-1){var m=(new RegExp(burl.val,"gi")).test(window.location.href);
if(burl.prop=="regex_match"&&m||burl.prop=="not_regex_match"&&!m)return false}}if(bouncex.website.ct==="fp_local_storage"&&!fpLocalStorageAvailable())return false;return true}
function init_visit_cookie(){var c=getBounceVisitCookie();if(c)bouncex.visit_cookie=bouncex.parseJSON(c);if(!bouncex.visit_cookie){bouncex.visit_cookie={};bouncex.visit_cookie.lp=bouncex.calling_url.substring(0,500).replace(/\+/g,"%2B").replace(/\%[A-F0-9]?[^A-F0-9]/,"");bouncex.visit_cookie.r=bouncex.referrer;setBounceVisitCookie()}else;}
function init_cookie(){bouncex.cookie=getBounceCookie();if(!bouncex.cookie.vid){if(bouncex.website.ct=="fp_local_storage")bouncex.cookie=getBounceCookieSingle();else bouncex.cookie=getBounceCookieFPLocalStorage();if(bouncex.cookie.vid)setBounceCookie()}if(bouncex.website.ct=="fp_local_storage")addEvent(window,"storage",function(data){if(data.key==bouncex.website.cookie_name&&data.newValue)bouncex.cookie=bouncex.getBounceCookie()},false)}
function init_cookie_functions(){perf.times("init_cookie_functions");if(bouncex.local_storage_enabled){window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieLocalStorage;window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieLocalStorage;init_cookie_localstorage()}else if(bouncex.website.ct=="multi_cookie"){window.MultiCookie=MultiCookie;window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieMulti;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieMulti}else if(bouncex.website.ct==
"fp_local_storage"){window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieFPLocalStorage;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieFPLocalStorage}else{window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieSingle;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieSingle}window.setBounceVisitCookie=setBounceVisitCookie;window.getBounceVisitCookie=getBounceVisitCookie;window.clearBounceCookie=clearBounceCookie;bouncex.stringify_cookie=stringify_cookie;bouncex.lz=
bouncex.lz||function(){var f=String.fromCharCode;var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}var LZString={compressToURI:function(input){if(input==null)return"";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a)})},
decompressFromURI:function(input){if(input==null)return"";if(input=="")return null;try{input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})}catch(e){bouncex.err(e);return""}},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return"";var i,value,context_dictionary={},context_dictionaryToCreate=
{},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=
context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=
0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-
1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));
context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=
0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=
0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=
context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==
bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}while(true){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++}return context_data.join("")},decompress:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,
function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1)dictionary[i]=i;bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>
0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:
0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length)return"";bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==
0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(enlargeIn==0){enlargeIn=
Math.pow(2,numBits);numBits++}if(dictionary[c])entry=dictionary[c];else if(c===dictSize)entry=w+w.charAt(0);else return null;result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}()}
function setLocalStorageCookie(msg_cookie){var cookie_one_or_many=bouncex.parseJSON(decodeURIComponent(msg_cookie));if(cookie_one_or_many&&cookie_one_or_many[bouncex.website.id]){bouncex.cookies=cookie_one_or_many;bouncex.cookie=cookie_one_or_many[bouncex.website.id]}else if(cookie_one_or_many&&cookie_one_or_many.vpv){bouncex.cookie=cookie_one_or_many;bouncex.cookies[bouncex.website.id]=bouncex.cookie}else{cookie_one_or_many[bouncex.website.id]={};bouncex.cookies=cookie_one_or_many}}
function localStorageFrameSuccess(){var cookie_listener=function(message){if(message.origin=="https://"+bouncex.website.biu&&typeof message.data=="string"){var messageData=message.data;if(messageData=="third_party_cookies_disabled")localStorageFail();else if(messageData.indexOf("epCookieValue=")===0){var epid=parseInt(message.data.replace("epCookieValue=",""));bouncex.ibx._push("bx_ep_lookup",{key:epid,val:{__src:"bx_ep_lookup"}})}else if(messageData.indexOf("bcx_message=true")<0){var msg_cookie=
message.data;if(!bouncex.local_storage_initialized){bouncex.local_storage_initialized=true;bouncex.cookie={};bouncex.cookies={};if(msg_cookie)setLocalStorageCookie(msg_cookie);else{if(bouncex.website.ct=="multi_cookie")bouncex.cookie=getBounceCookieMulti();else bouncex.cookie=getBounceCookieSingle();clearBounceCookie(true)}init_post_cookie()}else setLocalStorageCookie(msg_cookie)}}};addEvent(window,"message",cookie_listener)}
function addLocalStorageFrame(){try{document.body.appendChild(bouncex.local_storage_frame);localStorageFrameSuccess()}catch(e){setTimeout(localStorageFail,0)}}function localStorageFail(){bouncex.local_storage_enabled=false;init_cookie_functions();if(!bouncex.local_storage_initialized){bouncex.local_storage_initialized=true;init_post_cookie()}}
function init_cookie_localstorage(){var local_storage_frame_url="https://"+bouncex.website.biu+"/assets/bounce/local_storage_frame7.min.html"+"#"+bouncex.website.id+(bouncex.website.swids?"&"+bouncex.website.swids:"");bouncex.local_storage_frame=document.createElement("IFRAME");bouncex.local_storage_frame.style["display"]="none";bouncex.local_storage_frame.setAttribute("id","bcx_local_storage_frame");bouncex.local_storage_frame.setAttribute("src",local_storage_frame_url);if(document.body)addLocalStorageFrame();
else var wait_for_body_interval=setInterval(function(){if(document.body){clearTimeout(wait_for_body_interval);addLocalStorageFrame()}},100)}
function init_public_functions(){window.console||(window.console={log:function(){return{}}});bouncex.log=console.log.bind?console.log.bind(console):window.console.log;bouncex.err=function(err){bouncex.log(err);perf.errs(err)};if(bouncex.website.ple)window.onerror=function(msg,url,lineNo,columnNo,errObj){if(url.indexOf("bounceexchange")>-1||errObj&&errObj.stack&&errObj.stack.indexOf("bounceexchange")>-1){bouncex.err(msg);return true}};bouncex.formatv=formatv;bouncex.setv=setv;bouncex.perf=perf;bouncex.loadBounceCss=
loadBounceCss;bouncex.updateQS=updateQS;bouncex.make_include_string=make_include_string;bouncex.baddjs=baddjs;bouncex.wndsize=wndsize;bouncex.init=init;bouncex.reloadCampaignsTimeout=false;bouncex.lastReloadCampaigns=0;bouncex.bcxReady=bcxReady;bouncex.stringify=stringify;bouncex.parseJSON=parseJSON;bouncex.addCss=addCss;bouncex.unload_campaigns=unload_campaigns;bouncex.unload_campaign=unload_campaign;bouncex.reload_campaigns=reload_campaigns;bouncex.nextStep=nextStep;bouncex.submitCampaignStep=submitCampaignStep;
bouncex.setJumpStep=setJumpStep;bouncex.placeCampaign=placeCampaign;bouncex.alignCampaign=alignCampaign;(function(g){"window"in g&&"document"in g&&function(){function h(a){a=String(a);var d=0,e=[],b=0,c=0,f;a=a.replace(/\s/g,"");0===a.length%4&&(a=a.replace(/=+$/,""));if(1===a.length%4)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(a))throw Error("InvalidCharacterError");for(;d<a.length;)f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d)),b=b<<
6|f,c+=6,24===c&&(e.push(String.fromCharCode(b>>16&255)),e.push(String.fromCharCode(b>>8&255)),e.push(String.fromCharCode(b&255)),b=c=0),d+=1;12===c?e.push(String.fromCharCode(b>>4&255)):18===c&&(b>>=2,e.push(String.fromCharCode(b>>8&255)),e.push(String.fromCharCode(b&255)));return e.join("")}function k(a){a=String(a);var d=0,e=[],b,c,f,g;if(/[^\x00-\xFF]/.test(a))throw Error("InvalidCharacterError");for(;d<a.length;)b=a.charCodeAt(d++),c=a.charCodeAt(d++),f=a.charCodeAt(d++),g=b>>2,b=(b&3)<<4|c>>
4,c=(c&15)<<2|f>>6,f&=63,d===a.length+2?f=c=64:d===a.length+1&&(f=64),e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f));return e.join("")}"atob"in g&&"btoa"in g||(g.atob=h,g.btoa=k)}()})(window);bouncex.repressCampaigns=repressCampaigns}
function init_browser(){var nav=navigator.userAgent;bouncex.browser={};bouncex.browser.webkit=/WebKit/.test(nav);bouncex.browser.firefox=/Firefox/.test(nav);bouncex.browser.msie=/Trident\/7\.|MSIE/.test(nav);bouncex.browser.opera=/Opera|OPR\//.test(nav);if(bouncex.browser.msie&&nav.indexOf("MSIE")>0)bouncex.browser.msie=parseInt(nav.split("MSIE")[1]);if(bouncex.browser.msie&&nav.indexOf("rv:")>0)bouncex.browser.msie=parseInt(nav.split("rv:")[1]);bouncex.browser.edge=/Edge/.test(nav);if(bouncex.browser.edge)bouncex.browser.edge=
parseInt(nav.split("Edge/")[1]);bouncex.browser.prerenderio=nav.indexOf("Prerender")>-1;bouncex.browser.android=nav.indexOf("Android")>-1;bouncex.browser.iphone=nav.indexOf("iPhone")>-1;bouncex.browser.ipad=nav.indexOf("iPad")>-1;bouncex.browser.ios8=false;bouncex.browser.ios9=false;bouncex.browser.ios=false;if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.browser.ios=parseInt(nav.split("Version/")[1]);bouncex.browser.ios9=bouncex.browser.ios===9;bouncex.browser.ios8=bouncex.browser.ios===
8;bouncex.browser.chrome=/CriOS/.test(nav);if(bouncex.browser.chrome)bouncex.browser.ios=parseInt(nav.split("CriOS/")[1])>47?9:false}else bouncex.browser.chrome=/Chrome/.test(nav);bouncex.browser.safari=!!(nav.indexOf("Safari")!=-1&&nav.indexOf("Chrome")==-1);if(bouncex.browser.safari&&nav.indexOf("Version/")>0)bouncex.browser.safari=parseInt(nav.split("Version/")[1].replace(".",""));if(bouncex.browser.chrome&&nav.indexOf("Chrome/")>0)bouncex.browser.chrome=parseInt(nav.split("Chrome/")[1]);if(bouncex.browser.firefox&&
nav.indexOf("Firefox/")>0)bouncex.browser.firefox=parseInt(nav.split("Firefox/")[1])}
function init_post_campaign_public_function(){bouncex.setBounceCookie=function(){setBounceCookie()};bouncex.initActivationFuncs=function(){init_activation_funcs()};bouncex.contains=jQuery.contains&&(jQuery().jquery.indexOf("1.4.")==-1&&!(jQuery().jquery.indexOf("1.8.")>-1))?jQuery.contains:eval("document.contains||document.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true}}}return false};");bouncex.close_ad=
function(ca_id,silent,no_report){close_ad(ca_id,silent,no_report)};bouncex.report=function(ca_id,eventname,extra){if(!bouncex.campaigns[ca_id])return;return report(ca_id,eventname,extra)};bouncex.report_submit=function(ca_id,obj,complete){return report_submit(ca_id,obj,complete)};bouncex.report_ga=function(action,label,bypass){report_ga(action,label,bypass)};bouncex.report_conversion=function(obj,source){report_conversion(obj,source)};window.close_bouncex_ad=close_ad;bouncex.fs=fs;bouncex.by_parent_id=
function(pid){return by_parent_id(pid)};bouncex.show_ad=function(ca_id){trigger_ad("manual",ca_id)};bouncex.align_callout=align_callout_public;bouncex.destroy_ad=destroy_ad;bouncex.unload_campaigns=unload_campaigns;bouncex.reload_campaigns=reload_campaigns;bouncex.reportGa=reportGa;bouncex.loadBrandStyles=loadBrandStyles;bouncex.loadWebfonts=loadWebfonts;bouncex.activate_action=activate_action;bouncex.activate_campaign=activate_campaign}
function initBa(){bouncex.ba={fbel:[],fbrc:0,fbto:null,lip:{}}}
function init_ibx(){bouncex.ibx={wsid:bouncex.website.id,_event_store:[],_item_store:[],uid:null,bxl:null,crt:null,token:null,mode:1,cvar:{},_init:function(){this.vid=bouncex.cookie.vid;this.token=bouncex.cookie.did;this.uid=this._get("user");this.mode=this._get("mode");this.bxl=this._get("bx_lookup");this.crt=this._get("cart");this._cart("set");this._clkthrough();this._espemailid();this._emailhash();this._log("initialized");this._log("mode: "+this.mode+" | "+"token: "+this.token)},user:function(key,
val){if(!this._validate(key)){this._log("invalid email");return}this.set("user",1);var cart=this._cart("get");if(cart){val=val||{};val.__cart=cart}this._push("user",{key:key,val:val});var params={};params["user:email"]=key;params["user:source"]=val.__src;params["user:gcr"]=bouncex&&bouncex.cookie?bouncex.cookie.gcr:99;params["agent"]="js";if(val.campaign)params["campaignid"]=val.campaign;params["eq"]=1;event_stream_report("user",params)},track:function(type,key,val,segment){if(!type||!key){this._log("type and key must be set");
return}if(this["_"+type+"_store"])this["_"+type+"_store"].push({key:JSON.stringify(val)});if(!segment)segment="";var pushobj={key:key,val:val,segment:segment};this._push(type,pushobj);var params={};var eventname=key;if(type=="item"){eventname="item";params["item:segment"]=segment;params["item:category"]=segment;params["item:id"]=key;params["item:url"]=val.__url;params["item:imageurl"]=val.creative;params["item:imagewidth"]=val.__width;params["item:imageheight"]=val.__height;params["stringvalue"]=
key}if(type=="cart")eventname="cart";for(var k in val)if(val.hasOwnProperty(k)&&k.substring(0,2)!="__")params[eventname+":"+k]=val[k];if(val&&val.stringvalue)params["stringvalue"]=val.stringvalue;params["eq"]=1;event_stream_report(eventname,params)},conv_params:function(){var params=this._auto_add({ibx_mode:this._get("mode"),ibx_clicks:this._get("clickstr")});if(params.ibx_clicks){this._cookies.create("__ibxc0",params.ibx_clicks);this._cookies.destroy("__ibxc")}this._log("conv_params: "+(params.ibx_clicks?
params.ibx_clicks:"[none]"));return this._qs(params)},set:function(what,val){switch(what){case "user":this.uid=val;this._cookies.create("__ibxu",val);break;case "mode":if(val==0||val==1){this.mode=val;this._cookies.create("__ibxm",val)}break;case "bx_lookup":this.bxl=val;this._cookies.create("__ibxl",val);break;case "cart":this.crt=val;this._cookies.create("__ibxcr",val,.5);break}return val},dump:function(what){this._log(what+" = "+this._get(what))},_get:function(what){var val;switch(what){case "events":val=
this._event_store;break;case "items":val=this._item_store;break;case "token":val=btoa(bouncex.cookie.did);break;case "user":val=parseInt(this._cookies.read("__ibxu"));if(isNaN(val))val=0;break;case "mode":val=this._cookies.read("__ibxm")==="0"?0:1;break;case "clickstr":val=this._cookies.read("__ibxc");break;case "clicks":val=(val=this._cookies.read("__ibxc"))?val.split(","):[];break;case "bx_lookup":val=parseInt(this._cookies.read("__ibxl"));if(isNaN(val))val=0;break;case "cart":val=parseInt(this._cookies.read("__ibxcr"));
if(isNaN(val))val=0;break;default:val="invalid"}return val},_push:function(type,obj){var logkey,qs="type="+type+"&wsid="+this.wsid+"&gcr="+bouncex.cookie.gcr+"&vid="+bouncex.cookie.vid+"&mode=1";qs+="&device_id="+encodeURIComponent(bouncex.cookie.did);obj.val=JSON.stringify(this._auto_add(obj.val||{}));qs=qs+"&"+this._qs(obj);logkey=typeof obj.key!="undefined"?": "+obj.key:"";this._log(type.toUpperCase()+logkey+" // "+qs);if(type=="cart"||type=="isr"||type=="bx_ep_lookup"||type=="bx_lookup"){var url=
bouncex.sau+"/ibx/ping?"+qs;var img=document.createElement("img");img.src=url}},_auto_add:function(obj){obj=obj||{};if(!obj.hasOwnProperty("__url"))obj.__url=location.href;if(!obj.hasOwnProperty("__referrer"))obj.__referrer=document.referrer;return obj},_bx_lookup:function(){if(this.bxl)return;if(bouncex.cookie.es&&bouncex.cookie.campaigns&&!bouncex.ibx.uid){var cs=bouncex.cookie.campaigns;var vid=null;for(var cid in cs)if(cs.hasOwnProperty(cid)&&cs[cid].ls&&cs[cid].lavid)vid=cs[cid].lavid;if(vid){var val=
{vid:vid,__src:"bx_lookup"};var cart=this._cart("get");if(cart)val.__cart=cart;this._push("bx_lookup",{key:vid,val:val})}}this.set("bx_lookup",1)},_cart:function(action){var cart=false;switch(action){case "get":try{cart=eval(bouncex.website.ibx.cart_rep.get)}catch(e){cart=false;this._log(e)}break;case "set":if(this.crt||location.href.indexOf("ibx_cart")==-1)return false;cart=this._getparam("ibx_cart");if(cart){eval(bouncex.website.ibx.cart_rep.set);this.set("cart",1)}cart=this.crt;break}return cart},
_clkthrough:function(){var click=this._getparam("ibx_source"),clicks;if(click)try{clicks=this._get("clickstr");if(!clicks)clicks=click;else if(clicks.indexOf(click)!=-1){this._log("click-through: "+click+" (DUPLICATE)");return}else clicks+=","+click;this._cookies.create("__ibxc",clicks);this._log("click-through: "+click)}catch(err){this._log(err)}},_emailhash:function(){var val=this._getparam("ueh");if(val)event_stream_report("user",{"agent":"js","user:emailhash":val})},_espemailid:function(){if(bouncex.website.ibx.ulpj){var params=
{"user:source":"esp-email-id","agent":"js"};var valFound=false;for(var urlParam in bouncex.website.ibx.ulpj)if(bouncex.website.ibx.ulpj.hasOwnProperty(urlParam)){var val=this._getparam(urlParam);if(val){valFound=true;params["user:"+bouncex.website.ibx.ulpj[urlParam]]=val}}if(valFound)event_stream_report("user",params)}},_log:function(msg){if(this.mode==0)bouncex.log("ibx: "+msg)},_validate:function(em){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return re.test(em)},_quick_validate:function(em){return em==null?false:em.indexOf(".")>2&&em.indexOf("@")>0},_qs:function(o){var a=[],s="";for(var k in o){if(!o.hasOwnProperty(k))continue;a.push(k+"="+encodeURIComponent(o[k]))}return a.join("&")},_cookies:{domain:window.bouncex.cookie_domain,create:function(name,value,time){if(!time)time=365;var dt=new Date;dt.setTime(dt.getTime()+time*24*60*60*1E3);var exp="; expires="+dt.toGMTString(),cookie_domain=this.domain?"domain=."+this.domain+";":"";document.cookie=
name+"="+value+exp+"; path=/;"+cookie_domain},read:function(name){var t=name+"=",vars=document.cookie.split(";");for(var r=0;r<vars.length;r++){var i=vars[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},destroy:function(name){this.create(name,"",-1)}},_getparam:function(name,qstring){var param_string=qstring?"?"+qstring:window.location.href;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&#]"+name+"=([^&#]*)";
var regex=new RegExp(regexS);var results=regex.exec(param_string);if(results==null)return"";else return decodeURIComponent(results[1])}}}function init_website_custom_js(){if(bouncex.website.cjs)try{eval(bouncex.website.cjs)}catch(err){bouncex.err(err)}}
function init_ibx_tracking(){if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1){if(bouncex.website.ibx.miw==1)try{jQuery("input").not(":input[type=button], :input[type=submit], :input[type=reset], :input[type=hidden], :input[type=radio], :input[type=checkbox], :input[type=image], :input[type=password]").blur(function(){var source=jQuery(this).attr("id");bouncex.ibx.user(jQuery(this).val(),{__src:source})})}catch(err){bouncex.err(err)}try{eval(bouncex.website.ibx.tjs)}catch(err){bouncex.err(err)}bouncex.ibx._bx_lookup()}}
function initBehavioralPush(){if(!bouncex.website.bpush)return;var type=getBrowserPushType();var behavioralPush={type:type,supported:!!type};bouncex["behavioralPush"]=behavioralPush;if(type){behavioralPush.safari_id="web.com.notify-push."+bouncex.website.domain.split(".")[0];behavioralPush.requestOptIn=type==="sw"?behavioralPushOptInSW:behavioralPushOptInAPN;var notificationPermission=getNotificationPermission();if(bouncex.website.domain===window.location.hostname&&!bouncex.cookie.bph&&bouncex.ssl&&
notificationPermission!==getVerbosePushPermission(bouncex.cookie.bp))setBehavioralPushPermission(notificationPermission);if(type==="sw"&&notificationPermission==="granted"&&bouncex.ssl)installServiceWorker().then(function(){bouncex.behavioralPush.swr.pushManager.getSubscription().then(function(subscription){if(!subscription)subscribeServiceWorker()})})}}
function initDeviceGraph(){var settings=bouncex.website.dgs;var script;var gcrNorm=bouncex.cookie.gcr>100?100:bouncex.cookie.gcr;if(!settings||!settings.trafficPercentage||!settings.tagData||gcrNorm>settings.trafficPercentage)return;script=document.createElement("script");for(var attr in settings.tagData)if(settings.tagData.hasOwnProperty(attr))script.setAttribute(attr,settings.tagData[attr]);script.setAttribute("data-id",'{"deviceid":"'+bouncex.cookie.did+'","clientid":'+bouncex.website.id+',"visitid":"'+
bouncex.cookie.vid+'"}');document.body.appendChild(script)}function installServiceWorker(){return new Promise(function(resolve){injectManifest();navigator.serviceWorker.register("/bx-sw.js").then(function(swr){bouncex.behavioralPush.swr=swr;checkActive()})["catch"](function(err){resolve("Error installing service worker")});function checkActive(swr){if(!bouncex.behavioralPush.swr.active)setTimeout(checkActive,1);else resolve(bouncex.behavioralPush.swr)}})}
function injectManifest(){var link=document.createElement("link");link.rel="manifest";link.href="/bx-manifest.json";document.head.appendChild(link)}function getVerbosePushPermission(cookieValue){var verboseValue="default";if(cookieValue==1)verboseValue="granted";else if(cookieValue==0)verboseValue="denied";return verboseValue}function getCookiePushPermission(verboseValue){var cookieValue;if(verboseValue=="granted")cookieValue=1;else if(verboseValue=="denied")cookieValue=0;return cookieValue}
function setBehavioralPushPermission(verbosePermission){if(verbosePermission==="default"){delete bouncex.cookie.bp;delete bouncex.cookie.bph}else{bouncex.cookie.bp=getCookiePushPermission(verbosePermission);if(window.location.hostname!==bouncex.website.domain||!bouncex.ssl)bouncex.cookie.bph=1}setBounceCookie()}
function behavioralPushReport(type,permission,token,campaignId){var data={agent:"user","notifypush:permission":permission,"notifypush:type":type,source:"notifypush",campaignid:campaignId};var segments=bouncex.vars&&bouncex.vars.push_segments?bouncex.vars.push_segments:[];if(token)data["notifypush:token"]=token;if(segments.length>0)data["notifypush:tags"]=segments;event_stream_report("register",data)}
function behavioralPushOptInSW(ca_id){var permission=getVerbosePushPermission(bouncex.cookie.bp);if(permission!=="default")return Promise.resolve(permission);if(!bouncex.ssl)return Promise.resolve("insecure");return installServiceWorker().then(function(){return subscribeServiceWorker(ca_id)})}
function subscribeServiceWorker(ca_id){return bouncex.behavioralPush.swr.pushManager.subscribe({userVisibleOnly:true}).then(function(result){var permission=getNotificationPermission();setBehavioralPushPermission(permission);behavioralPushReport("sw",permission,result.endpoint,ca_id);return{permission:permission,result:result}},function(error){var permission=getNotificationPermission();if(permission==="denied"){setBehavioralPushPermission("denied");behavioralPushReport("sw","denied",false,ca_id)}return{permission:permission,
result:error}})}
function behavioralPushOptInAPN(ca_id){var permission=getVerbosePushPermission(bouncex.cookie.bp);var segments=bouncex.vars&&bouncex.vars.push_segments?bouncex.vars.push_segments:[];if(permission!=="default")return Promise.resolve(permission);return new Promise(function(resolve){safari.pushNotification.requestPermission(bouncex.website.bpush.safari_service_url,bouncex.behavioralPush.safari_id,{website:encodeURIComponent(location.href),data:JSON.stringify({tags:segments,alias:bouncex.cookie.did})},function(result){setBehavioralPushPermission(result.permission);
behavioralPushReport("apn",result.permission,result.deviceToken,ca_id);resolve({permission:result.permission,result:result})})})}function canShowGbi(){var div=document.createElement("div");div.innerHTML="&nbsp;";div.className=bouncex.lz.decompressFromURI("IYEwzgRgNg9gxgayA");document.body.appendChild(div);var height=div.offsetHeight;document.body.removeChild(div);return height!==0}
function attachClickReportingToIframe(container,ca_id){bouncex.on(container,"mouseenter.gbi_click_events_"+ca_id,function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+ca_id,function(){bouncex.report(ca_id,"click")})});bouncex.events[ca_id]["gbi_click"]=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+ca_id)};bouncex.on(container,"mouseleave.gbi_click_events_"+ca_id,bouncex.events[ca_id]["gbi_click"])}
bouncex.gbi={wrapContentInIframe:function(container,payloadHTML,ca_id){var oldFrame=container.find("iframe");if(oldFrame.length)oldFrame.remove();var style="";var provider=bouncex.campaigns[ca_id].gbi.provider;if(!bouncex.campaigns[ca_id].ng&&this.providerApi[provider].getRatio){var ratio=this.providerApi[provider].getRatio(ca_id);if(ratio!==1){ratio*=.9;style+="-webkit-transform: scale("+ratio+");transform: scale("+ratio+");"}}var gbiFrame=jQuery('<iframe target="_blank" class="bx-gbi-frame" frameborder="0" horizontalscrolling="no" verticalscrolling="no" width="100%" height="100%" vspace="0" hspace="0" marginwidth="0" scrolling="no" marginheight="0" allowTransparency="true"></iframe>');
container.append(gbiFrame);var doc=gbiFrame.get(0).contentWindow.document;doc.open();var iframeHTML='<html><head><base target="_blank"/></head><body marginwidth="0" marginheight="0" style="-webkit-transform-origin: 0 0;transform-origin: 0 0;'+style+'">'+payloadHTML+"</body>";doc.write(iframeHTML);doc.close();return doc},init:function(ca_id){bouncex.campaigns[ca_id].gbi.impressionPixels=new Array;bouncex.campaigns[ca_id].gbi.clickPixels=new Array},fail:function(ca_id,msg){bouncex.campaigns[ca_id].failed=
true;this.clearRequestAssets(ca_id);this.log(ca_id,msg,true)},log:function(ca_id,msg,fail){if(bouncex.debug){var campaign=ca_id?"("+ca_id+")":"";var provider="("+(bouncex.campaigns[ca_id]?bouncex.campaigns[ca_id].gbi.provider||"no provider":"stack")+")";bouncex.log("%c gbi "+campaign+provider+": "+msg,"color: "+(fail?"#FF0000":"#00F"));if(console.trace&&bouncex.trace)console.trace()}},request:function(ca_id){bouncex.gbi.init(ca_id);var api=bouncex.gbi.providerApi[bouncex.campaigns[ca_id].gbi.provider];
if(!api)bouncex.gbi.fail(ca_id,"undefined provider "+bouncex.campaigns[ca_id].gbi.provider);try{if(api.request)api.request(ca_id);else bouncex.gbi.fetch(ca_id)}catch(err){bouncex.gbi.fail(ca_id,err)}},fetch:function(ca_id){var api=bouncex.gbi.providerApi[bouncex.campaigns[ca_id].gbi.provider];return bouncex.gbi.doAjaxRequest(api.getFetchOptions(ca_id))},doAjaxRequest:function(options){options.crossDomain=true;options.global=false;var vernums=jQuery.fn.jquery.split(".");options.xhrFields={withCredentials:true};
if(parseInt(vernums[0])<=1&&parseInt(vernums[1])<=5){options.beforeSend=function(xhr){xhr.withCredentials=true};options.xhr=function(){var xhr=jQuery.ajaxSettings.xhr();var setRequestHeader=xhr.setRequestHeader;xhr.setRequestHeader=function(name,value){if(name=="X-Requested-With")return;setRequestHeader.call(this,name,value)};return xhr}}bouncex.gbi.ajaxRequest=jQuery.ajax(options)},report:function(ca_id,eventname,extra){bouncex.gbi.log(ca_id,'reporting event "'+eventname+'"');if(bouncex.campaigns[ca_id].gbi.provider){var pixels=
"";if(eventname=="pop"){if(bouncex.campaigns[ca_id].gbi.impressionPixels&&bouncex.campaigns[ca_id].gbi.impressionPixels.length>0)pixels+=bouncex.campaigns[ca_id].gbi.impressionPixels.join("")}else if(eventname=="click")if(bouncex.campaigns[ca_id].gbi.clickPixels&&bouncex.campaigns[ca_id].gbi.clickPixels.length>0)pixels+=bouncex.campaigns[ca_id].gbi.clickPixels.join("");if(pixels)if(bouncex.campaigns[ca_id].gbi.provider=="oubr"){var config=bouncex.campaigns[ca_id].gbi.config;var options={url:bouncex.campaigns[ca_id].gbi.impressionPixels[0],
method:"GET",timeout:15E3,beforeSend:function(xhr){xhr.setRequestHeader("Authorization","API_KEY "+config["API_KEY"])},success:function(response){bouncex.gbi.log(ca_id,'reporting provider pixel for "'+eventname+'"')},error:function(XHR,textStatus,errorThrown){bouncex.gbi.log(ca_id,'error for reporting provider pixel for "'+eventname+'"')}};bouncex.gbi.doAjaxRequest(options)}else{jQuery(pixels).hide().appendTo(bouncex.body);bouncex.gbi.log(ca_id,'reporting provider pixel for "'+eventname+'"')}}var stackId=
bouncex.campaigns[ca_id].gbi.stack_id;if(stackId&&(eventname=="eligible"||eventname=="pop")){var stack=bouncex.gbi.stacks[stackId];var stackCampaigns=stack.campaigns;var controlLeader=bouncex.campaigns[stack.leader_id].ttype=="control";for(var priority in stackCampaigns){var stackCaId=stackCampaigns[priority];var isStackSelf=stackCaId==ca_id;var isStackLeader=stackCaId==bouncex.gbi.stacks[stackId].leader_id;if(eventname=="pop"&&!isStackSelf&&isStackLeader)noteCookieAdShown(stackCaId);if(eventname==
"eligible"&&(isStackSelf||isStackLeader)||eventname=="pop"&&isStackSelf)buildReport(stackCaId,eventname,extra);if(eventname=="pop"){var newEventname="trypop";var moreExtra={};moreExtra["trypop:provider"]=bouncex.campaigns[stackCaId].gbi.provider||"none";buildReport(stackCaId,newEventname,moreExtra)}if(isStackSelf)break}}else buildReport(ca_id,eventname,extra)},requestCompleteMultiple:function(ca_id,html,onsuccess){var ca=bouncex.campaigns[ca_id];bouncex.gbi.log(ca_id,"have a bid with multiple units");
var api=bouncex.gbi.providerApi[ca.gbi.provider];api.buildHTML(ca_id,ca.gbi.lastResponse);loadImages(ca.images,function(){bouncex.gbi.log(ca_id,"images loaded");activateGbiCampaign(ca_id);if(onsuccess)onsuccess()})},requestCompleteSingle:function(ca_id,html,onsuccess){var ca=bouncex.campaigns[ca_id];bouncex.gbi.log(ca_id,"have a bid with a single unit");var container;if(ca.ng)container=bouncex.campaigns[ca_id].obj1.find(".bx-step-"+(ca.gbi.step||1)).find(".bx-group-placeholder").eq(0);else{var containerType=
"overlay";if(ca.bottom!=="none")containerType="bottom";else if(ca.ctop!=="none")containerType="top";else if(ca.callout!=="none")containerType="callout";var container=jQuery("#campaign_"+ca_id+"_container_"+containerType).find(".bcx_inner")}var frameDoc;try{frameDoc=bouncex.gbi.wrapContentInIframe(container,html,ca_id)}catch(err){bouncex.gbi.fail(ca_id,"failed to wrap content in iframe "+err);return false}attachClickReportingToIframe(container,ca_id);loadImages(jQuery(frameDoc).find("img").filter(":visible"),
function(){bouncex.gbi.log(ca_id,"image loaded");activateGbiCampaign(ca_id);if(onsuccess)onsuccess()})},requestCompleteSingleVideo:function(ca_id,vastUrl){var ca=bouncex.campaigns[ca_id];ca.gbi.playerLoadAttempts=ca.gbi.playerLoadAttempts?ca.gbi.playerLoadAttempts:1;if(ca.gbi.playerLoadAttempts>50){bouncex.gbi.fail(ca_id,"jwplayer failed to load after 5 seconds");return false}if(typeof bouncex.jwplayer==="undefined"){ca.gbi.playerLoadAttempts++;setTimeout(function(){bouncex.gbi.requestCompleteSingleVideo(ca_id,
vastUrl)},100);return false}bouncex.gbi.log(ca_id,"have a bid with a single vast unit");var playerConfig=ca.gbi.config.videoPlayerConfig||{};playerConfig.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4";playerConfig.advertising=playerConfig.advertising||{};playerConfig.advertising.client="vast";playerConfig.advertising.tag=vastUrl;var container=ca.obj1.find(".bx-step-"+(ca.gbi.step||1)).find(".bx-group-placeholder").eq(0);var id=container.attr("id");ca.gbi.player=bouncex.jwplayer(id);
ca.gbi.player.setup(playerConfig);ca.gbi.player.on("adClick",function(){bouncex.report(ca_id,"click")});ca.gbi.contentLoaded=true},cancelRequest:function(ca_id){bouncex.gbi.log(ca_id,"cancelling request");if(bouncex.gbi.ajaxRequest)bouncex.gbi.ajaxRequest.abort();bouncex.gbi.init(ca_id)},clearRequestAssets:function(ca_id){if(bouncex.events[ca_id]["gbiRequest"]){clearInterval(bouncex.events[ca_id]["gbiRequest"]);delete bouncex.events[ca_id]["gbiRequest"]}},getCreativeDimensions:function(ca_id){var creative=
jQuery("#bx-creative-"+ca_id);creative.css("max-width","none");return{width:creative.width(),height:creative.height()}},shrinkToFitWindow:function(ca_id){var creativeDimensions=bouncex.gbi.getCreativeDimensions(ca_id);var windowSize=bouncex.wndsize();var windowPadding=12;windowSize.width-=windowPadding;windowSize.height-=windowPadding;var widthRatio=creativeDimensions.width>windowSize.width?windowSize.width/creativeDimensions.width:1;var heightRatio=creativeDimensions.height>windowSize.height?windowSize.height/
creativeDimensions.height:1;var ratio=widthRatio>heightRatio?heightRatio:widthRatio;if(ratio<1)bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width+windowPadding+"px",height:creativeDimensions.height+windowPadding+"px",overflow:"visible",top:"50%",left:"50%",transform:"scale("+ratio+") translate(-50%, -50%)",transformOrigin:"0 0"})},shrinkToFitParent:function(ca_id){var creativeDimensions=bouncex.gbi.getCreativeDimensions(ca_id);var containerWidth=bouncex.campaigns[ca_id].obj1.parent().width();
var widthRatio=creativeDimensions.width>containerWidth?containerWidth/creativeDimensions.width:1;if(widthRatio<1)bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width*widthRatio+"px",height:creativeDimensions.height*widthRatio+"px",transform:"scale("+widthRatio+")",transformOrigin:"0 0"})},populateTemplate:function(ca_id,response,unitJsonPath,imageJsonPath){var creative=jQuery("#bx-creative-"+ca_id);var creativeClone=creative.clone(true);var templateGroups=creativeClone.find(".bx-group-placeholder");
var groupLength=templateGroups.length;for(var k=0;k<groupLength;k+=1){var unit=eval(unitJsonPath+"[k];");var templateGroup=jQuery(templateGroups[k]);if(templateGroup.length)if(unit){var image=eval("unit."+imageJsonPath);templateGroup.find(".bx-lineshape").css("background-image","url("+image+")");bouncex.campaigns[ca_id].images.push(image);var html=templateGroup.html();html=html.replace(/{(.*?)}/gi,function(query,keyword){var content=eval("unit."+keyword);if(typeof content!=="undefined")return content});
templateGroup.html(html)}else templateGroup.remove()}var html=creativeClone.html();html=html.replace(/{(.*?)}/gi,function(query,keyword){try{return eval("response."+keyword)}catch(err){return keyword}});creativeClone.html(html);creative.replaceWith(creativeClone)},generateDynamicRequestUrlParams:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var dynamicQueryStr="";var dynamicParams=config.dynamic_request_params;if(dynamicParams)for(var param in dynamicParams)try{dynamicQueryStr+="&"+
param+"="+encodeURIComponent(eval(dynamicParams[param]))}catch(e){bouncex.gbi.log("invalid dynamic request param "+param+" must have valid javascript as value")}return dynamicQueryStr},providerApi:{an:{getFetchOptions:function(ca_id){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config.request_url,type:"POST",dataType:"json",processData:false,timeout:config.timeout||255,success:function(response){var gbiHTML=self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,
"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,textStatus)}};return options},processResponse:function(ca_id,response){if(response&&response.status=="ok")try{var resLength=response["native"].length;if(resLength>0){var html="";for(var i=0;i<resLength;i++){bouncex.campaigns[ca_id].gbi.clickPixels.push('<img src="'+response["native"][i].click_trackers+'"/>');var impressionTrackerLength=response["native"][i].impression_trackers.length;
if(impressionTrackerLength>0)for(var j=0;j<impressionTrackerLength;j++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response["native"][i].impression_trackers[j]+'"/>');html+='<a href="'+response["native"][i].click_url+'"><img height="100%" width="100%" title="';html+=response["native"][i].title+'" src="'+response["native"][i].main_media[0].url+'"/></a>'}return html}}catch(err){bouncex.gbi.fail(ca_id,err)}return""}},dfpi:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;
var self=this;var options={url:config.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(ca_id),type:"GET",dataType:"json",processData:false,timeout:config.timeout||1E3,success:function(response){var gbiHTML=self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,
response){if(response&&response.main_media)try{var impressionTrackerLength=response.impression_trackers.length;if(impressionTrackerLength>0)for(var i=0;i<impressionTrackerLength;i++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response.impression_trackers[i]+'"/>');var clickTrackerLength=response.click_trackers.length;if(clickTrackerLength>0)for(var i=0;i<clickTrackerLength;i++)bouncex.campaigns[ca_id].gbi.clickPixels.push('<img src="'+response.click_trackers[i]+'"/>');var mediaLength=
response.main_media.length;if(mediaLength>0){var html="";for(var i=0;i<mediaLength;i++){html+='<a href="'+response.click_url+'"><img height="100%" width="100%" title="';html+=response.title+'" src="'+response.main_media[i].url+'"/></a>'}return html}}catch(err){bouncex.gbi.fail(ca_id,err)}return""}},dfps:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var self=this;var options={url:config.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(ca_id),
type:"GET",dataType:"json",processData:false,timeout:config.timeout||1E3,success:function(response){var gbiHTML=self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(response&&response.main_media)try{var impressionTrackerLength=response.impression_trackers.length;if(impressionTrackerLength>
0)for(var i=0;i<impressionTrackerLength;i++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response.impression_trackers[i]+'"/>');var mediaLength=response.main_media.length;if(mediaLength>0){var html="";for(var i=0;i<mediaLength;i++)html+=response.main_media[i].url;return html}}catch(err){bouncex.gbi.fail(ca_id,err)}return""}},dfphtml:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(ca_id),
method:"GET",global:false,processData:false,timeout:config.timeout||1E3,complete:function(response,status){if(status=="success")if(response.status===200){var gbiHTML=response.responseText;if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.campaigns[ca_id].gbi.html=gbiHTML;activateGbiCampaign(ca_id)}else bouncex.gbi.fail(ca_id,"response status "+response.status);else return bouncex.gbi.fail(ca_id,status+" "+response.status)}};return options}},crit:{getFetchOptions:function(ca_id,action){var self=
this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config.endpoint+"/recommendations.get",data:config,dataType:"jsonp",method:"GET",timeout:15E3,success:function(response){if(self.processResponse(ca_id,response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(response&&response.response_status===0)try{return this.populatePixel(ca_id,response)&&this.populateCreative(ca_id,
response)}catch(err){bouncex.gbi.fail(ca_id,err)}else{if(response&&response.status_message)bouncex.gbi.fail(ca_id,"Bad response: "+response.status_message);else bouncex.gbi.fail(ca_id,"No bid");return false}},populatePixel:function(ca_id,response){var pixels=response.impression_pixels;var pixelLength=pixels.length;for(var k=0;k<pixelLength;k+=1)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+pixels[k].url+'"/>');return true},populateCreative:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,
response,"response.products","image.url");return true}},tabr:{getFetchOptions:function(ca_id,action){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;config["source.id"]=window.location.pathname;config["source.url"]=window.location.href;config["rec.visible"]=false;config["user.session"]="init";config["app.type"]="desktop";var options={url:config.endpoint_domain+"/1.1/json/"+config["publisher-name"]+"/recommendations.get",data:config,dataType:"json",method:"GET",timeout:15E3,success:function(response){if(self.processResponse(ca_id,
response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(!(response&&response.id&&response.list.length>0))return bouncex.gbi.fail(ca_id,"no bid");try{if(!response.list)return bouncex.gbi.fail(ca_id,"no bid");bouncex.campaigns[ca_id].gbi.lastResponse=response;this.getPixels(ca_id,response);return true}catch(err){bouncex.gbi.fail(ca_id,err)}},buildHTML:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,
response,"response.list","thumbnail[0].url")},getPixels:function(ca_id,response){var config=bouncex.campaigns[ca_id].gbi.config;var impressionPixel=config.endpoint_domain+"/1.1/json/"+config["publisher-name"]+"/recommendations.notify-visible?";impressionPixel+="response.id="+response.id+"&response.session="+response.session;impressionPixel+="&app.type="+(bouncex.state.mobile?"mobile":"desktop")+"&app.apikey="+config["app.apikey"];bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+impressionPixel+
'"/>')}},oubr:{getFetchOptions:function(ca_id,action){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config[config["environment"]+"_endpoint"]+"/recommendations/documents",dataType:"json",method:"GET",data:config.data,timeout:15E3,beforeSend:function(xhr){xhr.setRequestHeader("Authorization","API_KEY "+config["API_KEY"])},success:function(response){if(self.processResponse(ca_id,response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,
"timed out")}};return options},processResponse:function(ca_id,response){if(!(response&&response.requestId&&response.items&&response.items.length>0))return bouncex.gbi.fail(ca_id,"no bid");try{bouncex.campaigns[ca_id].gbi.lastResponse=response;return this.getPixels(ca_id,response)&&this.populateCreative(ca_id,response)}catch(err){bouncex.gbi.fail(ca_id,err)}},populateCreative:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,response,"response.items","thumbnail");return true},getPixels:function(ca_id,
response){var config=bouncex.campaigns[ca_id].gbi.config;var impressionPixel=response._actions.reportViewed;bouncex.campaigns[ca_id].gbi.impressionPixels.push(impressionPixel);return true}},index:{request:function(ca_id){var self=this;bouncex.gbi.init(ca_id);try{this.fetch(ca_id);var config=bouncex.campaigns[ca_id].gbi.config;bouncex.events[ca_id]["gbiRequest"]=setInterval(function(){if(!can_show_ad(ca_id)&&!bouncex.campaigns[ca_id].failed){clearInterval(bouncex.events[ca_id]["gbiRequest"]);bouncex.gbi.log(ca_id,
"clearing interval");return}bouncex.gbi.init(ca_id);self.fetch(ca_id)},config.reload||60*3*1E3)}catch(err){bouncex.gbi.fail(ca_id,err)}},fetch:function(ca_id){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;config.id=getTime2();var multi=config.imp.length>1||config.jsonp;var video=config.imp[0].video;var productionEndpoint=bouncex.ssl?"https://as-sec":"http://as";var endPointPrefix=config.production===false?"http://astest":productionEndpoint;var options;config.site={page:updateQS(document.location.protocol+
"//"+document.location.hostname+document.location.pathname,"deployment",bouncex.campaigns[ca_id].type,"device",bouncex.state.mobile?"mobile":"desktop")+(multi&&config.params&&config.params.length>0?"&"+config.params:""),ref:document.referrer,mobile:bouncex.state.mobile?1:0};if(multi||video){var req={id:config.id,imp:config.imp,site:config.site};options={url:endPointPrefix+".casalemedia.com/cygnus",data:{v:"7",cb:getTimeMs(),s:config.s,r:bouncex.stringify(req)},dataType:"text"};if(video){if(typeof bouncex.jwplayer===
"undefined")getScript("//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/7.11.3/jwplayer.js",function(){bouncex.gbi.log(ca_id,"jwplayer loaded");bouncex.jwplayer.key="ci+9UwhcX3hv6KNH3JF5Wkk5BduvsSJqPO8HD8+vcty2o8/U"});options.data.v="8.8";options.data.fn="jsonp";bouncex.campaigns[ca_id].gbi.isVideo=true}}else options={url:endPointPrefix+".casalemedia.com/ajaxbidder/?s="+config.s,data:bouncex.stringify(config),method:"POST",type:"POST",dataType:"json",processData:false};options.contentType=
"application/x-www-form-urlencoded";options.global=false;options.crossDomain=true;options.xhrFields={withCredentials:true};options.timeout=config.timeout||1E3;options.complete=function(response,status){if(status=="success"){var ca=bouncex.campaigns[ca_id];if(response.status===200){var responseText=response.responseText;if(multi||video)responseText=responseText.substring(responseText.indexOf("(")+1,responseText.lastIndexOf(")"));var bid=self.processResponse(ca_id,responseText,multi);if(!bid)return bouncex.gbi.fail(ca_id,
"no bid");if(video){ca.gbi.vastUrl=bid.ext&&bid.ext.vasturl;bouncex.gbi.requestCompleteSingleVideo(ca_id,ca.gbi.vastUrl)}else ca.gbi.html=bid.adm;ca.gbi.step=multi?Number(bid.impid):1;bouncex.gbi.log(ca_id,"using step "+ca.gbi.step);activateGbiCampaign(ca_id)}else{bouncex.gbi.log(ca_id,"empty response");deactivateGbiCampaign(ca_id)}}else return bouncex.gbi.fail(ca_id,status+" "+response.status)};bouncex.gbi.doAjaxRequest(options)},processResponse:function(ca_id,response,multi){if(response)try{response=
bouncex.parseJSON(response);var highest=response.seatbid[0].bid[0];if(multi)for(var i=0;i<response.seatbid.length;i++)for(var j=0;j<response.seatbid[i].bid.length;j++){if(!response.seatbid[i].bid[j].ext.pricelevel)continue;var price=Number(response.seatbid[i].bid[j].ext.pricelevel.substring(1));var high_price=Number(highest.ext.pricelevel.substring(1));if(price>high_price)highest=response.seatbid[i].bid[j]}return highest}catch(err){}return false},getRatio:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;
var unitSize=config.imp[0].banner;var windowSize=bouncex.wndsize();var wratio=1,hratio=1;if(unitSize.w>windowSize.width)wratio=windowSize.width/unitSize.w;if(unitSize.h>windowSize.height)hratio=windowSize.height/unitSize.h;return wratio>hratio?hratio:wratio}}}};bouncex.on=function(selector,events,callback){if(jQuery.fn.on==undefined)selector.bind(events,callback);else selector.on(events,callback)};bouncex.off=function(selector,events){if(jQuery.fn.off==undefined)selector.unbind(events);else selector.off(events)};
function bcxReady(f){if(bouncex.website.fbe||!(bouncex.website.sd>-1&&(bouncex.website.vars||bouncex.website.acts)))f();else{if(!bouncex._bcxReady)eval('bouncex._bcxReady=function(){function i(){if(r.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(i,1);return}r.ready()}function s(t){r.bindReady();var n=r.type(t);e.done(t)}var e,t,n={};n["[object Boolean]"]="boolean";n["[object Number]"]="number";n["[object String]"]="string";n["[object Function]"]="function";n["[object Array]"]="array";n["[object Date]"]="date";n["[object RegExp]"]="regexp";n["[object Object]"]="object";var r={isReady:false,readyWait:1,holdReady:function(e){if(e){r.readyWait++}else{r.ready(true)}},ready:function(t){if(t===true&&!--r.readyWait||t!==true&&!r.isReady){if(!document.body){return setTimeout(r.ready,1)}r.isReady=true;if(t!==true&&--r.readyWait>0){return}e.resolveWith(document,[r])}},bindReady:function(){if(e){return}e=r._Deferred();if(document.readyState==="complete"){return setTimeout(r.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",t,false);window.addEventListener("load",r.ready,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",t);window.attachEvent("onload",r.ready);var n=false;try{n=window.frameElement==null}catch(s){}if(document.documentElement.doScroll&&n){i()}}},_Deferred:function(){var e=[],t,n,i,s={done:function(){if(!i){var n=arguments,o,u,a,f,l;if(t){l=t;t=0}for(o=0,u=n.length;o<u;o++){a=n[o];f=r.type(a);if(f==="array"){s.done.apply(s,a)}else if(f==="function"){e.push(a)}}if(l){s.resolveWith(l[0],l[1])}}return this},resolveWith:function(r,s){if(!i&&!t&&!n){s=s||[];n=1;try{while(e[0]){e.shift().apply(r,s)}}finally{t=[r,s];n=0}}return this},resolve:function(){s.resolveWith(this,arguments);return this},isResolved:function(){return!!(n||t)},cancel:function(){i=1;e=[];return this}};return s},type:function(e){return e==null?String(e):n[Object.prototype.toString.call(e)]||"object"}};if(document.addEventListener){t=function(){document.removeEventListener("DOMContentLoaded",t,false);r.ready()}}else if(document.attachEvent){t=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",t);r.ready()}}}return s}()');
bouncex._bcxReady(f)}}
function updateQS(){var arguri=arguments.length&1,orig=arguri?arguments[0]:window.top.location.href,p=orig.split("#"),uri=p[0],hash=p.length>1?p[1]:false,s=[];for(var i=arguri;i<arguments.length;i+=2){var k=arguments[i],v=encodeURIComponent(arguments[i+1]),r=new RegExp("([?&])"+k+"=?.*?(&|$)","gi");if(uri.match(r))uri=uri.replace(r,"$1"+k+"="+v+"$2");else s.push(k+"="+v)}if(s.length)uri+=(uri.indexOf("?")==-1?"?":uri.slice(-1)!="&"?"&":"")+s.join("&");return uri+(hash?"#"+hash:"")}
function qs(o){var a=[],s="";for(var k in o){if(!o.hasOwnProperty(k))continue;a.push(k+"="+encodeURIComponent(o[k]))}return a.join("&")}function getJString(e){var t=typeof e;if(t!="object"||e===null){if(t=="string")e='"'+e+'"';return String(e)}else{var n,r,i=[],s=e&&e.constructor==Array;for(n in e){r=e[n];t=typeof r;if(t=="string")r='"'+r+'"';else if(t=="object"&&r!==null)r=getJString(r);i.push((s?"":'"'+n+'":')+String(r))}return(s?"[":"{")+String(i)+(s?"]":"}")}}
function stringify(e){if(typeof JSON==="undefined"||typeof JSON.stringify!=="function")return getJString(e);else return JSON.stringify(e)}function parseJSON(e){try{var parsed=JSON.parse(e);if(!parsed||typeof parsed!=="object")return{};return parsed}catch(e){return{}}}function addCss(css,target,id){var style=document.createElement("style");if(id)style.id=id+"-style";if(style.styleSheet)style.styleSheet.cssText=css;else style.innerHTML=css;target.appendChild(style);return style}
function MultiCookie(obj){this.disable_first_party=false;this.first_party_limit=999999;this.domain=window.location.host;this.best=function(b,o){return o.length>b.length?o:b};this.parse_json=function(jsonstr){return JSON.parse(jsonstr)};this.stringify_json=function(obj){return JSON.stringify(obj)};this.set_qs=function(s,k,v){if(s.indexOf("&"+k+"=")==-1)s+="&"+k+"="+v;else{var r=new RegExp("&"+k+"=[^&]*");s=s.replace(r,"&"+k+"="+v)}return s};for(var k in obj)this[k]=obj[k];var ls=window.localStorage,
gs=window.globalStorage;this.set=function(n,v){if(typeof v=="object")v=this.stringify_json(v);if(!this.disable_first_party)this.cookie(n,v);this.local_storage(n,v);this.global_storage(n,v);this.window_name(n,v);this.user_data(n,v)};this.get=function(n){var vs=this.getvs(n);var b="",o;while(o=vs.pop())b=this.best(b,o);this.set(n,b);return b};this.getvs=function(n){var vs=[];function a(v){if(v&&v!=="")vs.push(v)}a(this.cookie(n));a(this.local_storage(n));a(this.global_storage(n));a(this.window_name(n));
a(this.user_data(n));return vs};this.cookie=function(n,v){if(v!==undefined){var domain=this.domain;if(window.location.host.indexOf(domain)<0)domain=window.location.host.split(".").slice(-2).join(".");document.cookie=n+"='; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+domain;if(document.cookie.length+v.length<this.first_party_limit)document.cookie=n+"="+v+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+domain}else return this.get_qs(n,document.cookie)};this.local_storage=function(n,
v){try{if(ls)if(v!==undefined)ls.setItem(n,v);else return ls.getItem(n)}catch(e){}};this.global_storage=function(n,v){if(gs){var host=this.getHost();try{if(v!==undefined)gs[host][n]=v;else return gs[host][n]}catch(e){}}};this.window_name=function(n,v){try{if(v!==undefined)window.name=this.set_qs(window.name,n,v);else return this.get_qs(n,window.name)}catch(e){}};this.user_data=function(n,v){try{var elm=this.createElem("div","userdata_el",1);elm.style.behavior="url(#default#userData)";if(v!==undefined){elm.setAttribute(n,
v);elm.save(n)}else{elm.load(n);return elm.getAttribute(n)}}catch(e){}};this.get_qs=function(n,text){if(typeof text!=="string")return;var neq=n+"=",ca=text.split(/[;&]/),i,c;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)===" ")c=c.substring(1,c.length);if(c.indexOf(neq)===0)return c.substring(neq.length,c.length)}}}
function getBounceCookieMulti(n){if(!bouncex.multicookie)bouncex.multicookie=new MultiCookie({domain:bouncex.website.domain,disable_first_party:bouncex.website.aco.disable_first_party&&bouncex.website.aco.disable_first_party?1:0,first_party_limit:bouncex.website.aco.first_party_limit&&bouncex.website.aco.first_party_limit?bouncex.website.aco.first_party_limit:999999,parse_json:bouncex.parseJSON,stringify_json:bouncex.stringify,best:function(b,o){if(b==="")b={};var obj={};try{if(o.substr(0,2)!=='{"')o=
bouncex.lz.decompressFromURI(o);obj=this.parse_json(o)}catch(e){return b}var bfvt=b.fvt?b.fvt:0,ofvt=obj&&obj.fvt?obj.fvt:0;return ofvt>bfvt?obj:b}});if(n!==undefined)return bouncex.multicookie.cookie(n);else{var obj=bouncex.multicookie.get(bouncex.website.cookie_name);if(obj==="")obj={};return obj}}function getBounceCookieLocalStorage(n){if(n!==undefined)return getBounceCookieSingle(n);else return bouncex.cookie}
function setBounceCookieLocalStorage(){var message=encodeURIComponent(bouncex.stringify(bouncex.cookie));if(bouncex.local_storage_frame.contentWindow)bouncex.local_storage_frame.contentWindow.postMessage(message,"*");else var interval=setInterval(function(){if(bouncex.local_storage_frame.contentWindow){bouncex.local_storage_frame.contentWindow.postMessage(message,"*");clearInterval(interval)}},100)}
function getBounceCookieFPLocalStorage(name){if(name)return getBounceCookieSingle(name);else{var cookie=localStorage.getItem(bouncex.website.cookie_name);return parseJSON(bouncex.lz.decompressFromURI(cookie))||{}}}function setBounceCookieFPLocalStorage(){localStorage.setItem(bouncex.website.cookie_name,bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie)))}
function setBounceCookieSingle(){var c_name=bouncex.website.cookie_name;var exdate=new Date;exdate.setDate(exdate.getDate()+365);var c_value=bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie))+"; expires="+exdate.toUTCString();if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value+";path=/;domain=."+bouncex.cookie_domain+";";else document.cookie=c_name+"="+c_value+";path=/;"}
function getBounceCookieSingle(name){if(!name)name=bouncex.website.cookie_name;var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name)if(bouncex.website.cookie_name==name)if(y){if(y.substr(0,2)!=='{"')y=bouncex.lz.decompressFromURI(y);return parseJSON(y)}else return{};else return y}if(bouncex.website.cookie_name==name)return{}}
function setBounceVisitCookie(){var c_name=bouncex.website.cookie_name+"v";var cookie=bouncex.visit_cookie;var exdate=new Date;exdate.setTime(exdate.getTime()+30*60*1E3);var c_value=bouncex.lz.compressToURI(bouncex.stringify(bouncex.visit_cookie))+"; expires="+exdate.toUTCString();if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value+";path=/;domain=."+bouncex.cookie_domain+";";else document.cookie=c_name+"="+c_value+";path=/;"}
function getBounceVisitCookie(name){if(!name)name=bouncex.website.cookie_name+"v";var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name)if(y.substr(0,2)==='{"')return y;else return bouncex.lz.decompressFromURI(y)}}
function setBounceCookieMulti(){var c_name=bouncex.website.cookie_name;bouncex.multicookie.set(c_name,bouncex.stringify_cookie(bouncex.cookie));var url=bouncex.au+"/capture/update_cookie?cookie_name="+c_name+"&cookie="+encodeURIComponent(JSON.stringify(bouncex.cookie));var img=document.createElement("img");img.src=url}
function clearBounceCookie(all){var c_name=bouncex.website.cookie_name;var c_value2="; expires=Thu, 01 Jan 1970 00:00:01 GMT";if(all){document.cookie=c_name+"="+c_value2+";path=/;";document.cookie=c_name+"="+c_value2+";path=/;domain=."+bouncex.cookie_domain+";"}else if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value2+";path=/;";else document.cookie=c_name+"="+c_value2+";path=/;domain=."+bouncex.cookie_domain+";"}
function stringify_cookie(str){return bouncex.stringify(str).replace(/;/g,"\\u003b").replace(/\+/g,"\\u002b").replace(/\=/g,"\\u003d")}function areCookiesEnabled(){var cookieEnabled=navigator.cookieEnabled?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled=document.cookie.indexOf("testcookie")!=-1?true:false}return cookieEnabled}
function checkCookieEligibility(){if(!(bouncex.website.ct=="multi_cookie"&&bouncex.website.aco.disable_first_party)&&!bouncex.website.is_preview)if(document.cookie.length>6E3)return false;return true}function fpLocalStorageAvailable(){if(window.localStorage)try{localStorage.setItem("bxtest",true);if(localStorage.getItem("bxtest")){localStorage.removeItem("bxtest");return true}}catch(e){}return false}var enablePersist=false;var enablePolling=false;
function validv(v){return typeof v=="number"&&!isNaN(v)||typeof v=="string"||typeof v=="boolean"}function maked(exp){var v=null;try{v=eval(decodeURI(exp))}catch(e){bouncex.err("bad cvar default "+exp)}return validv(v)?v:0}function makeq(exp){var f=function(){return null};var str="f = (function(){return "+exp+"});";try{eval(decodeURI(str))}catch(e){bouncex.err("bad cvar expression "+exp)}return f}
function evalv(n){var r={s:true,c:false,v:bouncex.vard[n].d};var nv=r.v;try{nv=bouncex.vard[n].q()}catch(e){r.s=false}if(!validv(nv))r.s=false;if(r.s){r.v=nv;r.c=r.v!=bouncex.vars[n]}return r}
function init_vars(){bouncex.cookie=getBounceCookie();bouncex.vard={};bouncex.vars={};bouncex.varp={max:0,c:0,timer:null,vn:[],suc:{},def:{}};if(bouncex.website.vars){for(var name in bouncex.website.vars){var def=bouncex.website.vars[name]["default"]?bouncex.website.vars[name]["default"]:0;var v=bouncex.website.vars[name]["val"]?bouncex.website.vars[name]["val"]:0;var poll=bouncex.website.vars[name]["polling"]!="none";var reload=bouncex.website.vars[name]["polling"]=="all";var enablePolling=enablePolling||
poll;var persist=bouncex.website.vars[name]["persist"]&&(bouncex.website.vars[name]["persist"]=="permanent"||bouncex.website.vars[name]["persist"]=="visit");enablePersist=enablePersist||persist;var n=encodeURI(name.toLowerCase());bouncex.vard[n]={d:maked(encodeURI(def)),q:makeq(encodeURI(v.toString().replace("\n"," "))),m:bouncex.website.vars[name]["polling"],p:persist?true:false};initv(n);if(poll)bouncex.varp.vn.push(n)}if(enablePolling){function checkPolling(){if(bouncex.varp.c>=bouncex.varp.max){clearInterval(bouncex.varp.timer);
return}var c=false;var rl=false;var names=[];for(var i=0;i<bouncex.varp.vn.length;i++){var n=bouncex.varp.vn[i];var r=evalv(n);if(r.c&&r.s){c=true;setv(n,r.v);if(bouncex.vard[n].m=="all"){rl=true;names.push(n)}}}if(c)setBounceCookie();if(rl){varnames=names.join(",");bouncex.varp.c++;reload_campaigns("variable",varnames)}}var polling_interval=bouncex.website.pi&&bouncex.website.pi>=bouncex.website.PMI?parseInt(bouncex.website.pi):bouncex.website.PDI;bouncex.varp.max=bouncex.website.PMR;bouncex.varp.timer=
setInterval(checkPolling,polling_interval)}}setBounceCookie()}function formatv(nv){if(nv==="true")return true;else if(nv==="false")return false;else if(typeof nv==="string"&&nv.match(/^[0-9]+$/))return parseInt(nv);else if(typeof nv==="string"&&nv.match(/^[0-9]+\.[0-9]+$/))return parseFloat(nv);return nv}function getpv(n){return bouncex.cookie.v&&bouncex.cookie.v[n]?formatv(bouncex.cookie.v[n]):bouncex.vard[n].d}
function initv(n){if(enablePersist)if(bouncex.vard[n].p){var v=bouncex.vars[n]=getpv(n);var r=evalv(n);if(r.s){v=r.v;bouncex.varp.suc[n]=true}else bouncex.varp.def[n]=bouncex.vard[n].d;setv(n,v)}else setv(n,evalv(n).v);else setv(n,evalv(n).v)}function setv(n,v){bouncex.vars[n]=v;if(enablePersist)if(bouncex.vard[n].p){bouncex.cookie.v=bouncex.cookie.v||{};bouncex.cookie.v[n]=v}}function activate_action(act){bouncex.cookie["a_"+act]=1;setBounceCookie();reload_campaigns("action",act)}
function init_custom_actions(){if(bouncex.website.acts&&bouncex.website.acts.length==undefined)for(var act_name in bouncex.website.acts)if(bouncex.website.acts[act_name]["val"]){var act_el=jQuery(bouncex.website.acts[act_name]["val"]);if(act_el.length)(function(name,el){try{el.bind(bouncex.website.acts[name]["action"]+".bx_act",function(){if(!bouncex.website.acts[name]["js_only"])bouncex.activate_action(name);if(!bouncex.website.acts[name]["activations"]||bouncex.website.acts[name]["activations"]==
"once")jQuery(bouncex.website.acts[name]["val"]).unbind(bouncex.website.acts[name]["action"]+".bx_act");if(bouncex.website.acts[name]["callback"])eval(bouncex.website.acts[name]["callback"])})}catch(err){bouncex.err(err)}})(act_name,act_el)}}
var perf={startTime:function(){if(typeof performance!="undefined"&&performance.timing&&performance.timing.navigationStart)return performance.timing.navigationStart;else return getTimeMs()}(),timesArr:{},errsArr:[],times:function(eventName){this.timesArr[eventName]=getTimeMs()-this.startTime},errs:function(err){this.errsArr.push(err)},get:function(type){var arrName=type+"Arr";var keyName="perf:"+type;var params={};params[keyName]=bouncex.stringify(this[arrName]);if(params[keyName]&&params[keyName]!=
"[]"&&params[keyName]!="{}")return params;return false},report:function(type){if(bouncex.cookie&&bouncex.cookie.did.substr(bouncex.cookie.did.length-3)==="037"){var params=this.get(type);if(params){params.agent="js";rptstr=event_stream_report("perf",params);return rptstr}}}};function next_sequence_id(){bouncex.cookie=getBounceCookie();if(!bouncex.cookie.hasOwnProperty("sid")||isNaN(bouncex.cookie.sid))bouncex.cookie.sid=0;bouncex.cookie.sid++;setBounceCookie();return bouncex.cookie.sid}
function event_stream_report(eventname,params){if(eventname==="user"&&bouncex.ibx._validate(params["user:email"])){var inCanada=bouncex.state.geo.country_code==="CA"||bouncex.state.geo.continent_code==="EU";var submittedToCompliantOverlay=params["user:source"]==="bouncex overlay"&&!bouncex.website.casl;if(inCanada&&!submittedToCompliantOverlay)return}var basepath=eventname==="user"||eventname==="coupon"||params["user:email"]?bouncex.seu:bouncex.eu;var baseurl=basepath+"/track.gif/"+encodeURIComponent(eventname)+
"?";params.mode=bouncex.cookie.m;params.websiteid=bouncex.website.id;params.visitid=bouncex.cookie.vid;params.deviceid=bouncex.cookie.did;if(bouncex.state&&bouncex.state.pvid!==undefined)params.pageviewid=bouncex.state.pvid;else params.pageviewid=bouncex.cookie.vpv+1;params.sequenceid=next_sequence_id();params.clienttimestamp=getTimeMs();params.clientapiversion=bouncex.tag;if(!params.source)params.source="web";if(!params.agent)params.agent="user";if(bouncex.debug)bouncex.eventLog.push({name:eventname,
params:params});var url=baseurl+qs(params);var img=document.createElement("img");img.src=url;behavioralAudiencesReport(eventname,params);return img.src}function report(ca_id,eventname,extra){if(bouncex.campaigns[ca_id].gbi)bouncex.gbi.report(ca_id,eventname,extra);else buildReport(ca_id,eventname,extra)}
function buildReport(ca_id,eventname,extra){var uq=0;var agent="user";var renames={"views":"eligible","pops":"pop","clicks":"click","closes":"close"};if(renames[eventname])eventname=renames[eventname];if(eventname=="click"){if(bouncex.campaigns[ca_id].impression_click_reported)return false;else bouncex.campaigns[ca_id].impression_click_reported=true;bouncex.cookie.campaigns[ca_id].lclk=getTime2();setBounceCookie()}else if(eventname=="close"){if(bouncex.campaigns[ca_id].impression_click_reported||
bouncex.campaigns[ca_id].submitted)return false}else if(eventname=="coupon"){agent="js";var cpn_id=extra["coupon:id"];try{bouncex.cookie.cpn=cpn_id;setBounceCookie()}catch(e){}}else if(eventname=="eligible"){agent="js";bouncex.cookie.campaigns[ca_id].vv=bouncex.cookie.campaigns[ca_id].vv?bouncex.cookie.campaigns[ca_id].vv+1:1;if(bouncex.cookie.campaigns[ca_id].vv==1)uq=1;setBounceCookie()}else if(eventname=="pop"||eventname=="trypop"){agent="js";if(bouncex.cookie.campaigns[ca_id].av==1)uq=1}if(!bouncex.website.is_preview){if(typeof extra!==
"object")extra={};if(uq)extra.uq=1;if(eventname=="coupon"){var querystring="website_id="+bouncex.website.id+"&c_id="+ca_id+"&v_id="+bouncex.cookie.vid+"&cpn_id="+cpn_id;var img=document.createElement("img");img.alt="bouncex report";img.src=bouncex.sau+"/capture/report_coupon.gif?"+querystring}extra.campaignid=ca_id;extra.source="bouncex";extra.agent=agent;event_stream_report(eventname,extra)}reportGa(ca_id,eventname);if(eventname=="click")event_js_eval(ca_id,"click")}
function report_submit(ca_id,obj,complete){obj.m=bouncex.cookie.m;obj.d=bouncex.cookie.d;obj.visit_id=bouncex.cookie.vid;obj.device_id=bouncex.cookie.did;obj.campaign_id=ca_id;obj.website_id=bouncex.website.id;obj.pvid=bouncex.state.pvid;obj.cts=getTimeMs();next_sequence_id();obj.cookie=bouncex.stringify(getBounceCookie());if(!obj.hasOwnProperty("step"))obj.step=1;if(complete)obj.last_step=1;return jQuery('<img src="'+bouncex.sau+"/capture/submit.gif?"+qs(obj)+'"/>')}
function report_conversion_sync(obj,source){perf.times("conversion");obj=obj||{};source=source||"sync";bouncex.cookie=getBounceCookie();if(typeof obj.amount=="undefined")obj.amount=0;if(typeof obj.order_id=="undefined")obj.order_id="";if(typeof obj.email=="undefined")obj.email="";if(typeof obj.goal=="undefined")obj.goal="";var bamount=obj.amount;var border_id=obj.order_id;var bemail=obj.email;var bgoal=obj.goal;var sid=next_sequence_id();var pvid=bouncex.state?bouncex.state.pvid:bouncex.cookie.vpv+
1;var url=bouncex.sau+"/capture/convert.gif?m="+bouncex.cookie.m+"&d="+bouncex.cookie.d+"&goal="+encodeURIComponent(bgoal)+"&email="+encodeURIComponent(bemail)+"&email_sha256="+(obj.email_sha256?encodeURIComponent(obj.email_sha256):"")+"&order_id="+encodeURIComponent(border_id)+"&amount="+encodeURIComponent(bamount)+"&website_id="+bouncex.website.id+"&visit_id="+bouncex.cookie.vid+"&device_id="+bouncex.cookie.did+"&pvid="+pvid+"&sid="+sid+"&cts="+getTimeMs()+"&source="+source+"&cookie="+escape(bouncex.stringify(bouncex.cookie))+
"&"+bouncex.ibx.conv_params();var img=document.createElement("img");img.alt="conversion pixel";img.src=url;if(bouncex.website.tcjs)try{eval(bouncex.website.tcjs)}catch(err){bouncex.err(err)}if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1)try{eval(bouncex.website.ibx.cjs)}catch(err){bouncex.err(err)}bouncex.cookie.lc=getTime2();setBounceCookie()}
function report_conversion(obj,source){var bamount,border_id=0;var bemail="",bgoal="";if(obj){bamount=obj.amount;border_id=obj.order_id;bemail=obj.email;if(obj.goal)bgoal=obj.goal}else obj={};if(bouncex.state.oijs)if(!border_id)try{border_id=eval(bouncex.state.oijs)}catch(e){}if(bouncex.state.ovjs)if(!bamount)try{bamount=eval(bouncex.state.ovjs)}catch(e){}if(bouncex.state.oejs)if(!bemail)try{bemail=eval(bouncex.state.oejs)}catch(e){}if(bouncex.state.goal)if(!bgoal)try{bgoal=bouncex.state.goal}catch(e){}obj.goal=
bgoal;obj.amount=bamount;obj.order_id=border_id;obj.email=bemail;source=source||"async";report_conversion_sync(obj,source)}function event_js_eval(ca_id,type,data){if(bouncex.campaigns[ca_id].event_js){var campaign_id=ca_id;if(typeof bouncex.campaigns[ca_id].event_js=="string")bouncex.campaigns[ca_id].event_js=bouncex.parseJSON(bouncex.campaigns[ca_id].event_js);if(bouncex.campaigns[ca_id].event_js[type])try{eval(bouncex.campaigns[ca_id].event_js[type])}catch(err){bouncex.err(err)}}}
function post_submit_redirect(mca_id){var is_api=bouncex.campaigns[mca_id].is_api;var redirect=bouncex.campaigns[mca_id].submission_redirect;var delay=bouncex.campaigns[mca_id].submission_redirect_delay;if(is_api&&delay<.3)delay=.3;else if(!is_api)return false;if(redirect)setTimeout(function(){window.top.location.href=redirect},delay?delay*1E3:0)}
function reportGa(ca_id,eventname){var ga_eventname=eventname;if(eventname=="pop")ga_eventname="impression";if(bouncex.website.gar&&bouncex.campaigns[ca_id].ga_i&&bouncex.campaigns[ca_id].ga_i[ga_eventname])bouncex.report_ga(ga_eventname,bouncex.campaigns[ca_id].ga_i.label)}
function report_ga(action,label,bypass){bypass=typeof bypass!="undefined"&&!!bypass;if(typeof action!="string"||typeof label!="string")return;var interaction=false;if(!bypass){action=action.charAt(0).toUpperCase()+action.slice(1).toLowerCase();interaction=action=="Impression";action="BounceX "+action}if(typeof window.ga==="function"){if(bouncex.website.gai)window.ga("create",bouncex.website.gai);window.ga("send","event","BounceX",action,label,{"nonInteraction":interaction})}else if(typeof window._gaq===
"object"){if(bouncex.website.gai)window._gaq.push(["_setAccount",bouncex.website.gai]);var strippedLabel=label.replace(/\(|\)/g,"");window._gaq.push(["_trackEvent","BounceX",action,strippedLabel,,interaction])}}function behavioralAudiencesReport(eventName,params){if(bouncex.website.ba.enabled&&params.agent==="user")facebookReport(eventName,params)}
function facebookReport(eventName,params){if(bouncex.website.ba.fbte===1&&params.agent==="user"){var fbEvents=createFacebookEvents(eventName,params);for(var i=0;i<fbEvents.length;i++)bouncex.ba.fbel.push(fbEvents[i]);sendEventsToFacebook(false);if(eventName==="item")bouncex.ba.lip=params}}
function sendEventsToFacebook(isRetry){if(typeof fbq!="undefined")while((e=bouncex.ba.fbel.pop())!=null){fbq(e.eventType,e.eventName,e.eventParams);if(bouncex.ba.fbto)clearTimeout(bouncex.ba.fbto)}else if(bouncex.ba.fbto==null||isRetry==true)if(bouncex.ba.fbrc<5){bouncex.ba.fbto=setTimeout(sendEventsToFacebook,500,true);bouncex.ba.fbrc++}}
function createFacebookEvents(bxEventName,bxParams){var fbEvents=[];var eventMap={"add to cart":"AddToCart","added to cart":"AddToCart","view item":"ViewContent","viewed item":"ViewContent","conversion":"Purchase"};var eventParams={"source":"bx","bx_event_name":bxEventName};if(bxEventName!=="conversion"){var itemid="item:id"in bxParams?bxParams["item:id"]:bouncex.ba.lip["item:id"];var price="item:price"in bxParams?bxParams["item:price"]:bouncex.ba.lip["item:price"];var category="item:category"in bxParams?
bxParams["item:category"]:bouncex.ba.lip["item:category"];var name="item:copy"in bxParams?bxParams["item:copy"]:bouncex.ba.lip["item:copy"];if(itemid){eventParams["content_type"]="product";eventParams["content_ids"]=[itemid]}if(price)eventParams["value"]=price;if(category)eventParams["content_category"]=category;if(name)eventParams["content_name"]=name}var customerType=typeof bouncex.getBounceCookie().lc==="undefined"?"prospect":"customer";var fbEventName="bx:"+bxEventName+" - "+customerType;fbEvents.push({"eventType":"trackCustom",
"eventName":fbEventName,"eventParams":eventParams});if(bxEventName in eventMap)fbEvents.push({"eventType":"track","eventName":eventMap[bxEventName],"eventParams":eventParams});return fbEvents}
function noteCookieAdShown(ca_id){if(bouncex.campaigns[ca_id].gbi.stack_id)if(bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].failed){bouncex.gbi.log(ca_id,"NOT saving cookie data");return false}else bouncex.gbi.log(ca_id,"saving cookie data");bouncex.campaigns[ca_id].ad_shown=true;bouncex.cookie.campaigns[ca_id].lavid=bouncex.cookie.vid;bouncex.cookie.campaigns[ca_id].la=getTime2();bouncex.cookie.campaigns[ca_id].av=bouncex.cookie.campaigns[ca_id].av?bouncex.cookie.campaigns[ca_id].av+
1:1;if(!bouncex.cookie.campaigns[ca_id].fsa)bouncex.cookie.campaigns[ca_id].fsa=bouncex.cookie.campaigns[ca_id].la;bouncex.cookie.campaigns[ca_id].as=bouncex.cookie.campaigns[ca_id].as?bouncex.cookie.campaigns[ca_id].as+1:1;bouncex.cookie.campaigns[ca_id].ao=bouncex.cookie.campaigns[ca_id].ao?bouncex.cookie.campaigns[ca_id].ao+1:1;if((bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="tabtitle"||bouncex.campaigns[ca_id].coverlay!=="none")&&!bouncex.campaigns[ca_id].is_man){bouncex.cookie.ao++;
bouncex.pa++;bouncex.cookie.as++;bouncex.campaigns[ca_id].ap=bouncex.campaigns[ca_id].ap?bouncex.campaigns[ca_id].ap+1:1}setBounceCookie()}function baddjs(file){var oScript=document.createElement("script");oScript.setAttribute("src",file);oScript.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(oScript)}
function loadBrandStyles(){if(bouncex.brandStyles){bouncex.brandStylesLoaded=bouncex.brandStylesLoaded||{};var newBrandStyles="";var newBrandStyleIds="";for(var style_id in bouncex.brandStyles)if(bouncex.brandStyles.hasOwnProperty(style_id)&&!bouncex.brandStylesLoaded[style_id]){newBrandStyles+=bouncex.brandStyles[style_id];newBrandStyleIds+="-"+style_id;bouncex.brandStylesLoaded[style_id]=true}if(newBrandStyles)bouncex.addCss(newBrandStyles,bouncex.head[0],"bx-brand"+newBrandStyleIds)}}
function loadWebfonts(){if(bouncex.webfonts){bouncex.fontCSSLoaded=bouncex.fontCSSLoaded||{};var newStylesheets="";for(var fontFolder in bouncex.webfonts)if(bouncex.webfonts.hasOwnProperty(fontFolder)&&!bouncex.fontCSSLoaded[fontFolder]){newStylesheets+='<link href="//assets.bounceexchange.com/fonts/'+fontFolder+'/stylesheet.css" rel="stylesheet" type="text/css" media="all" />';bouncex.fontCSSLoaded[fontFolder]=1}jQuery(newStylesheets).appendTo(bouncex.head)}}
function wndsize(){var e=0;var t=0;if(!window.innerWidth)if(!(document.documentElement.clientWidth==0)){e=document.documentElement.clientWidth;t=document.documentElement.clientHeight}else{e=document.body.clientWidth;t=document.body.clientHeight}else{e=window.innerWidth;t=window.innerHeight}return{width:e,height:t}}function wndorientation(){return window.orientation}
function make_include_string(type,rltype,rlname){next_sequence_id();var tojQ=bouncex.website.ljq==="never"?0:typeof jQuery;var bcx_persist="";if(!type){type="init1";if(enablePersist){var cookie=bouncex.cookie;for(var n in bouncex.varp.suc)bcx_persist+="&vsuc["+n+"]=true";for(var n in bouncex.varp.def)bcx_persist+="&vdef["+n+"]="+escape(bouncex.varp.def[n]).replace(/\+/g,"%2B")}else var cookie=getBounceCookie()}else{var cookie=bouncex.cookie;type="reloadCampaigns"}cookie=bouncex.stringify(cookie);
var visit_cookie=bouncex.stringify(bouncex.visit_cookie);bcx_vars="";var currval=null;for(var n in bouncex.vars){var v=bouncex.vars[n];bcx_vars+="&vars["+n+"]="+escape(v)}var tzo=(new Date).getTimezoneOffset();var wsize=bouncex.wndsize();var resolution=wsize.width+"x"+wsize.height;var cts=getTimeMs();var bp=bouncex.behavioralPush&&bouncex.behavioralPush.supported?1:0;var bcx_str=bouncex.au+"/bounce/"+type+".js?tojQ="+tojQ+"&cts="+cts+"&tzo="+tzo+"&is_preview="+(bouncex.website.is_preview?"true":"false")+
"&website_id="+bouncex.website.id+"&resolution="+resolution+"&referrer="+bouncex.referrer+"&is_google_pla="+bouncex.is_google_pla+"&calling_url="+bouncex.calling_url+"&visit_cookie="+escape(visit_cookie)+"&cookie="+escape(cookie)+bcx_vars.replace(/\+/g,"%2B")+bcx_persist+"&cookie_too_large="+bouncex.cookie_too_large+"&bp="+bp;if(type=="reloadCampaigns"){bcx_str+="&pvid="+bouncex.state.pvid;if(bouncex.campaigns)for(var ca_id in bouncex.campaigns)if(bouncex.campaigns[ca_id].ad_visible)bcx_str+="&vc[]="+
ca_id;if(rltype!=undefined)bcx_str+="&rltype="+rltype;if(rlname!=undefined)bcx_str+="&rlname="+rlname}return bcx_str}function unload_campaigns(){for(var ca_id in bouncex.events)unload_campaign(ca_id)}
function unload_campaign(ca_id){for(var e in bouncex.events[ca_id]){if(typeof bouncex.events[ca_id][e]=="object")jQuery(bouncex.events[ca_id][e]).unbind(e);else if(typeof bouncex.events[ca_id][e]=="function")bouncex.events[ca_id][e]();else clearTimeout(bouncex.events[ca_id][e]);delete bouncex.events[ca_id][e]}}
function reload_campaigns(name,type){if(bouncex.state){if(bouncex.reloadCampaignsTimeout!==false){clearTimeout(bouncex.reloadCampaignsTimeout);bouncex.reloadCampaignsTimeout=false}var maxReloadInterval=1E3;var minReloadInterval=0;var now=getTimeMs();var delay=minReloadInterval;if(bouncex.lastReloadCampaigns>now-maxReloadInterval)delay=maxReloadInterval-(now-bouncex.lastReloadCampaigns);name=name||reload_campaigns.caller&&reload_campaigns.caller.arguments&&reload_campaigns.caller.arguments.length&&
reload_campaigns.caller.arguments[0];bouncex.reloadCampaignsTimeout=setTimeout(function(){bouncex.lastReloadCampaigns=now;clearTimeout(bouncex.reloadCampaignsTimeout);bouncex.reloadCampaignsTimeout=false;bouncex.baddjs(bouncex.make_include_string("reloadCampaigns",type||"manual",name))},delay)}}
function init(){if(typeof jQuery==="undefined"||typeof jQuery.fn==="undefined"){setTimeout(function(){bouncex.init()},100);return false}perf.times("init1");bouncex.direction="up";bouncex.events={};bouncex.window=jQuery(window).eq(0);bouncex.body=jQuery("body").eq(0);bouncex.head=jQuery("head").eq(0);bouncex.html=jQuery("html").eq(0);if(!bouncex.body||!bouncex.body.length){setTimeout(function(){bouncex.init()},3E3);return false}bouncex.overlay_visible=false;bouncex.server_client_time_diff=bouncex.state.tn-
parseInt(getTimeMs()/1E3);if(bouncex.cookie.as>0&&window.document.title.length==0)window.document.title=window.location.hostname;if(bouncex.cookie.v)for(var n in bouncex.cookie.v)if(bouncex.vard&&bouncex.vard[n])if(bouncex.vard[n].p)bouncex.setv(n,bouncex.formatv(bouncex.cookie.v[n]));init_post_campaign_public_function();bouncex.pa=0;bouncex.timespaced=false;var allCookies=false;if(bouncex.website.ct=="multi_cookie"||bouncex.website.ct=="fp_local_storage")allCookies=true;clearBounceCookie(allCookies);
bouncex.setBounceCookie();bouncex.ca=activation_funcs();bouncex.body_margin=parseInt(bouncex.body.css("margin-top"))||0;bouncex.ibx._init();init_ibx_tracking();init_website_custom_js();listenMessages();if(bouncex.campaigns){bouncex.loadBounceCss(function(){bouncex.loadBrandStyles();init_activation_funcs()});bouncex.loadWebfonts()}else if(bouncex.usd)unhideSite();if(bouncex.website.ple)bouncex.on(bouncex.window,"beforeunload.bx_perf",function(){perf.report("times");perf.report("errs")});if(bouncex.website.dge)initDeviceGraph();
bouncex.bcxReady(function(){if(typeof window.bxAsyncInit==="function")window.bxAsyncInit();else if(bouncex.state.rc)bouncex.report_conversion(null,"scraping")});init_custom_actions()}function unhideSite(){clearTimeout(bouncex.usd.timeout);bouncex.usd.callback();delete bouncex.usd}
var XD={postMessage:function(message,tar){var frame=jQuery("iframe",jQuery(tar));if(!frame.length)return;var f=frame.get(0).contentWindow;if(!(f&&f.postMessage))return;window.setTimeout(function(){f["postMessage"](message,"*")},0)},receiveMessage:function(callback){if(window["addEventListener"])window["addEventListener"]("message",callback,false);else window["attachEvent"]("onmessage",callback)}};
function listenMessages(){if(bouncex.listening)return false;bouncex.listening=true;XD.receiveMessage(function(message){var allowedOrigins=["https://api2.bounceexchange.com","http://api2.bounceexchange.com","https://api.bounceexchange.com","http://api.bounceexchange.com","https://dev.bounceexchange.com","http://dev.bounceexchange.com","https://tag.bounceexchange.com","http://tag.bounceexchange.com","https://assets.bounceexchange.com","http://assets.bounceexchange.com","http://bounceexchange.com","https://bounceexchange.com"];
if(!(message.origin&&allowedOrigins.indexOf(message.origin)>-1))return;var message_str=message.data;if(!message_str||typeof message_str!=="string"||message_str.indexOf("bcx_message")!==0)return false;var messages=message_str.split("&");var result=[];for(var i=0;i<messages.length;i++){var r=messages[i].split("=");result[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}var mca_id=result["campaign_id"];var message=result["bcx_content"]||result["message"];if(!parseInt(mca_id)||!bouncex.campaigns[mca_id])return;
if(bouncex.cookie.d!=="d"&&bouncex.campaigns[mca_id].coverlay!=="none")if(message=="move_step"||message=="had_error")bouncex.window.trigger("scroll");if(message=="failed"){bouncex.campaigns[mca_id].failed=true;if(bouncex.campaigns[mca_id].ad_visible)bouncex.close_ad(mca_id,true);return false}else if(message=="loaded")activate_campaign(mca_id);else if(message=="ios8_focused"){if(bouncex.browser.ios&&bouncex.browser.ios>7){bouncex.lastScroll=bouncex.window.scrollTop();setTimeout(function(){var cObject=
jQuery("#bcx_"+mca_id+"_iframe_overlay,#bcx_"+mca_id+"_iframe_top,#bcx_"+mca_id+"_iframe_bottom,#bcx_"+mca_id+"_iframe_callout").eq(0);window.scrollTo(0,cObject.offset().top)},500)}}else if(message=="ios8_blured"){if(bouncex.browser.ios&&bouncex.browser.ios>7&&bouncex.lastScroll>=0)setTimeout(function(){window.scrollTo(0,bouncex.lastScroll);bouncex.lastScroll=undefined},100)}else if(message=="eval")try{eval(result.js)}catch(e){bouncex.err(e)}else if(bouncex.campaigns[mca_id].ad_visible)if(message==
"report_coupon")reportCouponSeen(mca_id,result["code"]);else if(message=="bcx_close_ad")close_ad(mca_id);else if(message=="bcx_close_ad_silent")close_ad(mca_id,false,true);else if(message=="bcx_form_subitted")processSubmittedCampaignForm(result,mca_id);else if(message=="report_click")report(mca_id,"click");else if(message=="had_error");else if(message=="reset_fsa"){bouncex.cookie.campaigns[mca_id].fsa=result["fsa"];setBounceCookie()}else if(message=="move_step"){jQuery("#bcx_onsite_els_"+mca_id+"_s"+
result["to_step"]).show();jQuery("#bcx_onsite_els_"+mca_id+"_s"+result["cur_step"]).hide();if(bouncex.campaigns[mca_id].show_close_step)show_close(mca_id,true)}else if(message=="update_title"){var old_title,seconds_left,str;seconds_left=result["seconds_left"];var update_time=result["update_time"];if(!update_time)bouncex.old_title=window.document.title;if(result["remove_timer"]=="1")bouncex.remove_timer=true;else bouncex.remove_timer=false;bouncex.timer_exists=true;if(seconds_left<=0){window.document.title=
bouncex.old_title;bouncex.timer_exists=false}seconds=seconds_left%60;minutes=Math.floor(seconds_left/60)%60;hours=result["format"].indexOf("{days}")>-1||result["format"].indexOf("{0days}")>-1?Math.floor(seconds_left/3600)%24:Math.floor(seconds_left/3600);days=result["format"]=="{days}"||result["format"]=="{0days}"?Math.ceil(seconds_left/86400):Math.floor(seconds_left/86400);if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;if(hours<10)hours="0"+hours;if(result["format"].indexOf("{0days}")>
-1&&days<10)days="0"+days;str=result["format"].replace("{hours}",hours).replace("{minutes}",minutes).replace("{seconds}",seconds).replace("{days}",days).replace("{0days}",days);if(!bouncex.old_title&&bouncex.timer_exists)window.document.title=str;else if(bouncex.old_title&&bouncex.timer_exists)window.document.title=str+" | "+bouncex.old_title}})}
function can_show_ad(ca_id,inthefuture){if(!bouncex.campaigns[ca_id])return false;if(bouncex.campaigns[ca_id].qbxtest&&!bouncex.campaigns[ca_id].ad_visible){if(!inthefuture&&bouncex.campaigns[ca_id].hasBehavioralCriteria&&!behavioralCriteriaComplete(ca_id))return false;return true}var oca_id=ca_id;var stackId=bouncex.campaigns[ca_id].gbi.stack_id;if(stackId&&ca_id!=bouncex.gbi.stacks[stackId].leader_id)ca_id=bouncex.gbi.stacks[stackId].leader_id;var time_now=getTime2();bouncex.cookie=getBounceCookie();
bouncex.cookie.lvt=bouncex.cookie.campaigns[ca_id].lvt=time_now;setBounceCookie();if(!inthefuture){if((bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.overlay_visible)return false;if(bouncex.campaigns[oca_id].ad_visible)return false;if(bouncex.website.ots)if((bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.timespaced==true)return false;if(bouncex.campaigns[ca_id].tvao>0){var top=(window.pageYOffset||document.documentElement.scrollTop)-
(document.documentElement.clientTop||0);if(bouncex.campaigns[ca_id].tvao>top)return false}if(bouncex.campaigns[ca_id].hasBehavioralCriteria&&!behavioralCriteriaComplete(ca_id))return false}if(bouncex.campaigns[oca_id].failed)return false;if((bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="tabtitle")&&!bouncex.campaigns[ca_id].is_man)if(bouncex.campaigns[ca_id].map>0&&bouncex.campaigns[ca_id].ap>=bouncex.campaigns[ca_id].map||bouncex.website.map>
0&&bouncex.pa>=bouncex.website.map)return false;if(bouncex.campaigns[ca_id].mas>0)if(bouncex.cookie.campaigns[ca_id].as>=bouncex.campaigns[ca_id].mas)return false;if(!bouncex.campaigns[ca_id].is_man&&bouncex.website.mas>0&&(bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.website.mas<=bouncex.cookie.as)return false;if(bouncex.campaigns[ca_id].mao>0&&bouncex.cookie.campaigns[ca_id].ao>=bouncex.campaigns[ca_id].mao)return false;if(!bouncex.campaigns[ca_id].is_man&&
!bouncex.campaigns[ca_id].ipc&&(bouncex.cookie.es||bouncex.cookie.campaigns[ca_id].ls||bouncex.cookie.campaigns[ca_id].submitted)&&bouncex.campaigns[ca_id].is_ec)return false;if((bouncex.campaigns[ca_id].is_pers||bouncex.campaigns[ca_id].closed_no_show)&&bouncex.cookie.campaigns[ca_id].wc)return false;if(bouncex.campaigns[ca_id].repressed)return false;if(inthefuture&&bouncex.campaigns[ca_id].hasBehavioralCriteria&&bouncex.campaigns[ca_id].activation_registry.length>0&&!bouncex.campaigns[ca_id].realtimeArmed&&
behavioralCriteriaComplete(ca_id))return false;return true}
function close_ad(ca_id,silent,no_report){if(!bouncex.campaigns[ca_id])return;if(!bouncex.campaigns[ca_id].ad_visible)return;bouncex.campaigns[ca_id].ad_visible=false;if(bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay"){bouncex.overlay_visible=false;if(bouncex.website.otc){bouncex.timespaced=true;bouncex.events[ca_id]["timeout_timespace"]=setTimeout(function(){bouncex.timespaced=false},bouncex.website.otc*1E3)}}if(bouncex.campaigns[ca_id].ng)close_ad_ng(ca_id);else close_ad_og(ca_id);
event_js_eval(ca_id,"close");if(!silent){var oca_id=ca_id;if(bouncex.campaigns[ca_id].gbi.stack_id&&oca_id!=bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].leader_id)oca_id=bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].leader_id;bouncex.cookie.campaigns[oca_id].wc=getTime2();setBounceCookie();if(!no_report)report(ca_id,"close");if(bouncex.campaigns[ca_id].close_redirect_type==="reload")bouncex.reload_campaigns();else if(bouncex.campaigns[ca_id].close_redirect_type&&bouncex.campaigns[ca_id].close_redirect_url)bouncex.events[ca_id]["timeout_close_redirect"]=
teleport(bouncex.campaigns[ca_id].close_redirect_type,bouncex.campaigns[ca_id].close_redirect_url)}}
function close_ad_ng(ca_id){if(bouncex.campaigns[ca_id].control)return false;if(bouncex.campaigns[ca_id].type==="tabtitle"&&!bouncex.campaigns[ca_id].control){if(bouncex.campaigns[ca_id].custom_tab_title.favicon_url)changeFavicon(ca_id,true);cancelTitleUpdate(ca_id)}bouncex.campaigns[ca_id].obj1.unbind("click.bcx_campaign_click_"+ca_id,handleClick);if(bouncex.browser.ios&&bouncex.campaigns[ca_id].inputs.length>0&&(bouncex.campaigns[ca_id].type==="conversionbar"||bouncex.campaigns[ca_id].type==="nanobar")){bouncex.campaigns[ca_id].inputs.unbind(".bcx_ios_input_fix_"+
ca_id);removeIosInputFix(ca_id)}var autoCloseEvent="timeout_auto_submission_close";if(bouncex.events[ca_id][autoCloseEvent]){clearTimeout(bouncex.events[ca_id][autoCloseEvent]);delete bouncex.events[ca_id][autoCloseEvent]}var timerEvent="campaign_timer";for(var eventName in bouncex.events[ca_id])if(eventName.indexOf(timerEvent)!==-1){clearInterval(bouncex.events[ca_id][eventName]);delete bouncex.events[ca_id][eventName]}close_ad_ng_post_outro(ca_id);if(bouncex.fxHelper&&bouncex.fxHelper.browserSupport!==
"none"&&bouncex.campaigns[ca_id].transitionEffect!=="no_effect"){bouncex.campaigns[ca_id].obj1.addClass("bx-impress-out");var creative=jQuery("#bx-creative-"+ca_id);bouncex.on(creative,bouncex.fxHelper.animationend,function(){bouncex.off(creative,bouncex.fxHelper.animationend);clearInterval(bouncex.campaigns[ca_id].animationTimeout);bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out")});bouncex.campaigns[ca_id].animationTimeout=setTimeout(function(){if(bouncex.campaigns[ca_id]&&
!bouncex.campaigns[ca_id].ad_visible){bouncex.off(creative,bouncex.fxHelper.animationend);bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out")}},1E3)}else bouncex.campaigns[ca_id].obj2.removeClass("bx-impress");if(bouncex.website.ally)hideAlly(ca_id);if(bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.isVideo&&bouncex.campaigns[ca_id].gbi.player)bouncex.campaigns[ca_id].gbi.player.stop()}
function close_ad_ng_post_outro(ca_id){if(bouncex.campaigns[ca_id].type=="overlay"){if(bouncex.website.ally)hideAllyOverlayPostOutro(ca_id);if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.html.removeClass("bx-client-overlay-ios");bouncex.body.removeClass("bx-client-overlay-ios");bouncex.window.scrollTop(bouncex.preImpressScrollY)}else{bouncex.html.removeClass("bx-client-overlay");bouncex.body.removeClass("bx-client-overlay")}}if(bouncex.campaigns[ca_id].blur_gate_enabled&&(bouncex.campaigns[ca_id].type==
"agilityzone"||bouncex.campaigns[ca_id].type=="annotation"))blurGateRemove(ca_id)}
function close_ad_og(ca_id){var te=getCampaignTransitionEffect(ca_id);var ef=te.substr(0,1);var cs=jQuery("#campaign_"+ca_id+"_container_overlay,#campaign_"+ca_id+"_container_top,#campaign_"+ca_id+"_container_bottom,#campaign_"+ca_id+"_container_callout");if(bouncex.timer_exists&&bouncex.remove_timer){clearInterval(bouncex.timer_interval);window.document.title=bouncex.old_title;bouncex.timer_exists=false}if(ef=="r"){if(bouncex.campaigns[ca_id].overlay!="none"){var lbx=document.getElementById("campaign_"+
ca_id+"_lightbox");setTimeout(function(){setOpacity(lbx,0)},150)}cs.removeClass("bcx_after");setTimeout(function(){cs.hide().css("display","none").removeClass("bcx_"+te)},300)}else cs.hide().css("display","none");if(bouncex.campaigns[ca_id].callout!="none")bouncex.window.unbind("bcx_callout_"+ca_id);if(bouncex.campaigns[ca_id].top!="none"){var push=document.getElementById("campaign_"+ca_id+"_pusher_top");if(push){bSlideUp(push);bouncex.window.trigger("bx_ad_hide",[parseInt(getStyle(push,"height"))])}}if(bouncex.campaigns[ca_id].bottom!=
"none")jQuery("#campaign_"+ca_id+"_pusher_bottom").appendTo("body").slideUp("slow");if(bouncex.campaigns[ca_id].overlay=="code"||bouncex.campaigns[ca_id].overlay=="email"||bouncex.campaigns[ca_id].overlay=="genie")flash_objects.css("visibility","visible")}
function trigger_ad(type,ca_id,args){var campaign=bouncex.campaigns[ca_id];if(type!=="manual"){var triggerId=makeUniqueInstrumentId(type,args);if(campaign.hasBehavioralCriteria){addTriggerToRegistry(triggerId,ca_id);if(campaign.realtimeArmed)if(!evaluateBehavioralTriggers([triggerId],campaign.activations))return behavioralCriteriaComplete(ca_id)}}show_ad(type,ca_id)}
function show_ad(type,ca_id){if(!can_show_ad(ca_id))return;if(!bouncex.pa)perf.times("showad");var ca=bouncex.campaigns[ca_id];if(ca.gbi&&(ca.gbi.provider=="index"||ca.gbi.provider=="tabr"||ca.gbi.provider=="dfphtml")&&!ca.gbi.contentLoaded&&!ca.gbi.isVideo){bouncex.gbi.clearRequestAssets(ca_id);var call=ca.gbi.provider!="tabr"?"requestCompleteSingle":"requestCompleteMultiple";bouncex.gbi[call](ca_id,ca.gbi.html,function(){ca.gbi.contentLoaded=true;show_ad(type,ca_id);if(ca.gbi.step>1){setJumpStep(ca_id,
ca.gbi.step,false);nextStep(ca_id)}});return false}bouncex.campaigns[ca_id].ad_visible=true;bouncex.campaigns[ca_id].impression_click_reported=false;bouncex.campaigns[ca_id].submitted=false;noteCookieAdShown(ca_id);report(ca_id,"pop",{"pop:activation":type});if(bouncex.campaigns[ca_id].ng)show_ad_ng(type,ca_id);else show_ad_og(type,ca_id);if(bouncex.campaigns[ca_id].overlay!="teleport"&&!bouncex.campaigns[ca_id].noCreative){show_close(ca_id);if(bouncex.campaigns[ca_id].ad_auto_close){var delay=bouncex.campaigns[ca_id].is_pers?
calc_delay_cvt(bouncex.campaigns[ca_id].ad_auto_close):bouncex.campaigns[ca_id].ad_auto_close*1E3;bouncex.events[ca_id]["timeout_auto_close"]=setTimeout(function(){close_ad(ca_id)},delay)}}if(bouncex.campaigns[ca_id].supress_overlay||bouncex.campaigns[ca_id].supress_top||bouncex.campaigns[ca_id].supress_bottom)for(var nca_id in bouncex.campaigns)if(nca_id!=ca_id&&(bouncex.campaigns[ca_id].supress_overlay&&(bouncex.campaigns[nca_id].coverlay!="none"||bouncex.campaigns[nca_id].type=="overlay")||bouncex.campaigns[ca_id].supress_top&&
(bouncex.campaigns[nca_id].ctop!="none"||bouncex.campaigns[nca_id].type=="nanobar")||bouncex.campaigns[ca_id].supress_bottom&&(bouncex.campaigns[nca_id].cbottom!="none"||bouncex.campaigns[nca_id].type=="conversionbar")))close_ad(nca_id,true);repressCampaigns(ca_id);if(bouncex.usd)unhideSite();event_js_eval(ca_id,"impression");if(bouncex.campaigns[ca_id].osfn_website)try{eval(bouncex.campaigns[ca_id].osfn_website)}catch(err){bouncex.err(err)}}
function repressCampaigns(ca_id){if(bouncex.campaigns[ca_id].repress_overlay||bouncex.campaigns[ca_id].repress_top||bouncex.campaigns[ca_id].repress_bottom)for(var nca_id in bouncex.campaigns)if(nca_id!=ca_id&&(bouncex.campaigns[ca_id].repress_overlay&&(bouncex.campaigns[nca_id].coverlay!="none"||bouncex.campaigns[nca_id].type=="overlay")||bouncex.campaigns[ca_id].repress_top&&(bouncex.campaigns[nca_id].ctop!="none"||bouncex.campaigns[nca_id].type=="nanobar")||bouncex.campaigns[ca_id].repress_bottom&&
(bouncex.campaigns[nca_id].cbottom!="none"||bouncex.campaigns[nca_id].type=="conversionbar")))bouncex.campaigns[nca_id].repressed=true}
function flashTitle(ca_id,howManyTimes){function step(){if(!bouncex.campaigns[ca_id].custom_tab_title.flashOn){bouncex.campaigns[ca_id].custom_tab_title.flashOn=true;if(bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)document.title=bouncex.campaigns[ca_id].custom_tab_title.formattedTitle;changeFavicon(ca_id,false)}else{bouncex.campaigns[ca_id].custom_tab_title.flashOn=false;if(bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)document.title=bouncex.originalTitle;changeFavicon(ca_id,
true)}if(--howManyTimes>0)bouncex.events[ca_id].effect_timeout=setTimeout(step,2E3)}howManyTimes=howManyTimes?howManyTimes:5;cancelTitleUpdate(ca_id);step()}
function scrollTitle(ca_id,position){if(!bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)return;position=position||0;function step(){var msg=bouncex.campaigns[ca_id].custom_tab_title.formattedTitle+"  ";if(position>msg.length)position=0;document.title=msg.substr(position)+msg.substr(0,position);position+=3;bouncex.events[ca_id].effect_timeout=setTimeout(step,1E3)}cancelTitleUpdate(ca_id);step()}
function changeFavicon(ca_id,toOrig){if(!bouncex.campaigns[ca_id].custom_tab_title.favicon_url)return;jQuery('link[rel~="icon"]').remove();var link=document.createElement("link");link.type=toOrig?"image/x-icon":bouncex.campaigns[ca_id].linkType;link.rel="icon";link.href=toOrig?bouncex.campaigns[ca_id].originalFavicon:bouncex.campaigns[ca_id].custom_tab_title.favicon_url;document.getElementsByTagName("head")[0].appendChild(link)}
function cancelTitleUpdate(ca_id){clearTimeout(bouncex.events[ca_id].effect_timeout);if(bouncex.originalTitle)document.title=bouncex.originalTitle;else document.title="";delete bouncex.campaigns[ca_id].custom_tab_title.flashOn}
function updateTitle(ca_id){bouncex.originalTitle=bouncex.originalTitle||document.title;var iconLink=jQuery('link[rel~="icon"]');bouncex.campaigns[ca_id].originalFavicon=iconLink&&iconLink.attr("href")||"/favicon.ico";bouncex.campaigns[ca_id].linkType=bouncex.campaigns[ca_id].custom_tab_title.favicon_type||"image/x-icon";var effect=bouncex.campaigns[ca_id].custom_tab_title.effect;var flashTimes=effect==="flashForever"?Infinity:1;if(effect==="scroll")scrollTitle(ca_id);else flashTitle(ca_id,flashTimes*
2-1);changeFavicon(ca_id,false)}
function show_ad_ng(type,ca_id){if(!bouncex.campaigns[ca_id].control)if(bouncex.campaigns[ca_id].type=="tabtitle")updateTitle(ca_id);else if(bouncex.campaigns[ca_id].type=="teleport")teleport("_self",bouncex.campaigns[ca_id].overlay_teleport_html);if(bouncex.campaigns[ca_id].control||bouncex.campaigns[ca_id].noCreative)return false;googleTrustedStoresBadgeFix(ca_id);if(bouncex.campaigns[ca_id].submittedYet)bouncex.campaigns[ca_id].submittedYet=false;if(bouncex.events[ca_id]["edwTimeout"])clearTimeout(bouncex.events[ca_id]["edwTimeout"]);bouncex.campaigns[ca_id].forceLastStep=
false;if(bouncex.campaigns[ca_id].current_step){bouncex.campaigns[ca_id].next_step=1;bouncex.nextStep(ca_id)}else{bouncex.campaigns[ca_id].next_step=2;bouncex.campaigns[ca_id].current_step=1}bouncex.campaigns[ca_id].obj1.bind("click.bcx_campaign_click_"+ca_id,{ca_id:ca_id},handleClick);if(!(bouncex.browser.msie||bouncex.browser.ipad||bouncex.browser.iphone)){var ctc=bouncex.campaigns[ca_id].obj1.find(".bx-click-to-copy");if(ctc.length>0){bouncex.on(ctc,"click",function(event){document.execCommand("copy")});
bouncex.on(ctc,"copy",clickToCopy)}}bouncex.campaigns[ca_id].inputs=bouncex.campaigns[ca_id].obj1.find(".bx-input, .bx-textarea");if((!bouncex.browser.msie||bouncex.browser.msie>8)&&bouncex.campaigns[ca_id].inputs.length>0){var bindEvents="keydown.bcx_campaign_input_"+ca_id+" focus.bcx_campaign_input_"+ca_id+" blur.bcx_campaign_input_"+ca_id+" change.bcx_campaign_input_"+ca_id+" paste.bcx_campaign_input_"+ca_id+" keyup.bcx_campaign_input_"+ca_id;bxBind(bouncex.campaigns[ca_id].inputs,bindEvents,handleInputEvents)}validateCouponsSeen(ca_id);
if(bouncex.campaigns[ca_id].type=="overlay"){bouncex.overlay_visible=true;if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.preImpressScrollY=bouncex.window.scrollTop();bouncex.html.addClass("bx-client-overlay-ios");bouncex.body.addClass("bx-client-overlay-ios");bouncex.html[0].scrollTop=1;bouncex.body[0].scrollTop=1}else{var htmlOverflow=getStyle(bouncex.html[0],"overflow-y");if(htmlOverflow=="auto"||htmlOverflow=="scroll")bouncex.html.addClass("bx-client-overlay");else bouncex.body.addClass("bx-client-overlay")}}else if(bouncex.campaigns[ca_id].type==
"nanobar"||bouncex.campaigns[ca_id].type=="conversionbar"||bouncex.campaigns[ca_id].type=="liquidscreen"){var clone=jQuery("#bx-campaign-"+ca_id+"-clone");if(bouncex.campaigns[ca_id].type=="nanobar"||bouncex.campaigns[ca_id].type=="liquidscreen")bouncex.body.prepend(clone);else if(bouncex.campaigns[ca_id].type=="conversionbar")bouncex.body.append(clone)}else if(bouncex.campaigns[ca_id].type=="annotation")bxBind(window,"resize.bx_campaign_"+ca_id,function(e){alignCampaign(ca_id)},ca_id);if(bouncex.browser.ios&&
bouncex.campaigns[ca_id].inputs.length>0&&(bouncex.campaigns[ca_id].type==="conversionbar"||bouncex.campaigns[ca_id].type==="nanobar"))bouncex.campaigns[ca_id].inputs.bind("touchstart.bcx_ios_input_fix_"+ca_id,{ca_id:ca_id},handleIosInputTouchStart).bind("blur.bcx_ios_input_fix_"+ca_id,{ca_id:ca_id},handleIosInputBlur);alignCampaign(ca_id);if(bouncex.campaigns[ca_id].blur_gate_enabled&&(bouncex.campaigns[ca_id].type=="agilityzone"||bouncex.campaigns[ca_id].type=="annotation"))blurGateAdd(ca_id);if(bouncex.campaigns[ca_id].shroud_on_hover)addShroudOnHover(ca_id);
bouncex.campaigns[ca_id].obj2.addClass("bx-impress");if(bouncex.website.ally)showAlly(ca_id);if(bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.config&&(bouncex.campaigns[ca_id].gbi.config.shrinkToFit||bouncex.campaigns[ca_id].gbi.config.shrinkToFitWindow))if(bouncex.campaigns[ca_id].type==="overlay")bouncex.gbi.shrinkToFitWindow(ca_id);else if(bouncex.campaigns[ca_id].type==="agilityzone")bouncex.gbi.shrinkToFitParent(ca_id);if(bouncex.fxHelper&&bouncex.fxHelper.browserSupport!=="none"&&
bouncex.campaigns[ca_id].transitionEffect!=="no_effect"){var creative=jQuery("#bx-creative-"+ca_id);bouncex.campaigns[ca_id].obj1.addClass("bx-impress-in");bouncex.on(creative,bouncex.fxHelper.animationend,function(){bouncex.off(creative,bouncex.fxHelper.animationend);bouncex.campaigns[ca_id].obj1.removeClass("bx-impress-in")})}bouncex.events[ca_id]["ally_timeout"]=setTimeout(function(){runCampaignTimers(ca_id);if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")focusOnFirstFocusableElement(ca_id,
true)},0);if(bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.isVideo&&bouncex.campaigns[ca_id].gbi.config.playOnImpression&&bouncex.campaigns[ca_id].gbi.player)bouncex.campaigns[ca_id].gbi.player.play()}
function runCampaignTimers(ca_id){var timers=bouncex.campaigns[ca_id].obj2.find(".bx-timer");if(timers.length>0){var index=0;timers.each(function(k,obj){var timer_id="campaign_timer_"+ ++index;if(!bouncex.events[ca_id][timer_id]){var timer=jQuery(obj);var countTo=timer.attr("data-count-to");var countFrom=timer.attr("data-count-from");var format=timer.attr("data-format");var onComplete=timer.attr("data-on-complete");var reset=parseInt(timer.attr("data-reset"));var hasDays=/{0?days}/.test(format);run_timer(countTo,
countFrom,format,hasDays,onComplete,reset,timer,timer_id,ca_id);bouncex.events[ca_id][timer_id]=setInterval(function(){run_timer(countTo,countFrom,format,hasDays,onComplete,false,timer,timer_id,ca_id)},1E3)}})}}
function blurGateAdd(ca_id){var ca=bouncex.campaigns[ca_id];ca.blur_gate_targets=jQuery(ca.callout_t+" ~ *").add(ca.blur_gate_inclusions).not(ca.blur_gate_exclusions).not(".bxc");ca.blur_gate_filler_placement=ca.calloutTarget.next().is(ca.obj1)?ca.obj1:ca.calloutTarget;ca.blur_gate_filler=jQuery();if(bouncex.browser.msie&&bouncex.browser.msie<=9)blurGateAddUsingRedactedContent(ca_id);else if(bouncex.browser.msie===10||bouncex.browser.msie===11||bouncex.browser.edge)blurGateAddUsingTextShadow(ca_id);
else blurGateAddUsingCssFilters(ca_id)}
function blurGateAddUsingRedactedContent(ca_id){var ca=bouncex.campaigns[ca_id];var contentHeight=0;ca.blur_gate_targets.each(function(i,el){contentHeight+=jQuery(el).height()});blurGateFillWithDummyContent(ca_id,ca.blur_gate_redacted_filler,contentHeight,0);var textColor=getStyle(ca.calloutTarget[0],"color")||"#000";var styles=".bx-blur-"+ca_id+".bx-blur-redacted b { color:"+textColor+"!important; background-color:"+textColor+"!important; }";var styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+
ca_id+"-blur-redacted");ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl);ca.blur_gate_targets.addClass("bx-blur-"+ca_id+" bx-blur-hide")}
function blurGateAddUsingTextShadow(ca_id){var ca=bouncex.campaigns[ca_id];blurGateAddFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler);var textColor=getStyle(ca.calloutTarget[0],"color")||"#000";var styles=".bx-blur-"+ca_id+".bx-blur-textshadow { text-shadow: 0 0 8px 1px "+textColor+"!important; }";var styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+ca_id+"-blur-shadow");ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur-textshadow");ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl)}
function blurGateAddUsingCssFilters(ca_id){var ca=bouncex.campaigns[ca_id];blurGateAddFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler);ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur")}function blurGateRemove(ca_id){var ca=bouncex.campaigns[ca_id];if(ca.blur_gate_filler)ca.blur_gate_filler.remove();if(ca.blur_gate_targets)ca.blur_gate_targets.removeClass("bx-blur-"+ca_id+" bx-blur bx-blur-hide bx-blur-textshadow")}
function blurGateAddFillerIfNeeded(ca_id,fillerType){var ca=bouncex.campaigns[ca_id];var minHeight=600;var contentHeight=0;ca.blur_gate_targets.each(function(i,el){contentHeight+=jQuery(el).height();return contentHeight<minHeight});var fillerAmountNeeded=minHeight-contentHeight;if(fillerAmountNeeded>0)blurGateFillWithDummyContent(ca_id,fillerType,fillerAmountNeeded,0)}
function blurGateFillWithDummyContent(ca_id,fillerType,targetHeight,currentHeight){var ca=bouncex.campaigns[ca_id];if(currentHeight<targetHeight){var fillerVariationIndex=ca.blur_gate_filler.length%fillerType.length;var filler=jQuery(fillerType[fillerVariationIndex]);ca.blur_gate_filler_placement.after(filler);var fillerHeight=filler.height();if(fillerHeight>0){ca.blur_gate_filler=ca.blur_gate_filler.add(filler);blurGateFillWithDummyContent(ca_id,fillerType,targetHeight,currentHeight+fillerHeight)}}}
function addShroudOnHover(ca_id){var campaignCreative=jQuery("#bx-creative-"+ca_id),hoverShroud=jQuery("#bx-hover-shroud-"+ca_id),hoverShroudTimer;if(campaignCreative.length&&hoverShroud.length){bxBind(campaignCreative,"mouseenter.bx-backdrop",function(){hoverShroudTimer=setTimeout(function(){bouncex.campaigns[ca_id].obj1.addClass("bx-hover-shroud-on")},150)},ca_id);bxBind(campaignCreative,"mouseleave.bx-backdrop",function(){clearTimeout(hoverShroudTimer);bouncex.campaigns[ca_id].obj1.removeClass("bx-hover-shroud-on")},
ca_id)}}
function show_ad_og(type,ca_id){var zx=2147483646;var msg="bcx_pop&cookie=";msg+=encodeURIComponent(bouncex.stringify_cookie(getBounceCookie()));if(bouncex.campaigns[ca_id].top!="none"){var top=document.getElementById("campaign_"+ca_id+"_container_top");if(top){show_ca_el(ca_id,top);if(bouncex.campaigns[ca_id].header_top_nano){var h=document.getElementById("campaign_"+ca_id+"_pusher_top");document.body.insertBefore(h,document.body.firstChild);if(bouncex.campaigns[ca_id].htna=="anypage"||bouncex.campaigns[ca_id].htna=="landing"&&
bouncex.state.iol){bSlideDown(h,"height");bouncex.window.trigger("bx_ad_show",[parseInt(getStyle(top,"height"))])}else{h.style.display="block";bouncex.window.trigger("bx_ad_show")}}center_campaign(ca_id,top);XD.postMessage(msg,top)}}if(bouncex.campaigns[ca_id].bottom!="none"){var bottom=document.getElementById("campaign_"+ca_id+"_container_bottom");if(bottom){show_ca_el(ca_id,bottom);if(bouncex.campaigns[ca_id].header_bottom_nano){var h=document.getElementById("campaign_"+ca_id+"_pusher_bottom");
jQuery(document.body).append(h);if(bouncex.campaigns[ca_id].hbna=="anypage"||bouncex.campaigns[ca_id].hbna=="landing"&&bouncex.state.iol)bSlideDown(h,"height");else h.style.display="block"}center_campaign(ca_id,bottom);XD.postMessage(msg,bottom)}}if(bouncex.campaigns[ca_id].callout!="none"){var callout=jQuery("#campaign_"+ca_id+"_container_callout");bouncex.campaigns[ca_id].c_button=jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);if(callout.length&&bouncex.campaigns[ca_id].c_button.length){var callout_obj=
callout.get(0);show_ca_el(ca_id,callout_obj);XD.postMessage(msg,callout_obj);align_callout(callout,ca_id);bxBind(window,"resize.bcx_callout_"+ca_id+" bx_ad_show.bcx_callout_"+ca_id+" bx_ad_hide.bcx_callout_"+ca_id+" scroll.bcx_callout_"+ca_id,function(e,anim_h){var anim=false;if(e.type==="bx_ad_show")anim="down";if(e.type==="bx_ad_hide")anim="up";align_callout(callout,ca_id,anim,anim_h)},ca_id)}}if(bouncex.campaigns[ca_id].overlay!="none")if(bouncex.campaigns[ca_id].overlay=="email"||bouncex.campaigns[ca_id].overlay==
"genie"||bouncex.campaigns[ca_id].overlay=="code"){var middle=document.getElementById("campaign_"+ca_id+"_container_overlay");if(middle){bouncex.overlay_visible=true;var mid=document.getElementById("campaign_"+ca_id+"_middle");if(!bouncex.fs()){middle.style.top=middle.style.left=0;mid.style.position="absolute"}show_ca_el(ca_id,middle);show_lightbox(ca_id);center_campaign(ca_id,middle);if(top)top.style.zIndex=zx;if(bottom)bottom.style.zIndex=zx;if(bouncex.state.mobile)bouncex.window.resize(function(){center_campaign(ca_id,
middle)});hide_flash()}XD.postMessage(msg,middle)}else if(bouncex.campaigns[ca_id].overlay==="teleport")teleport(bouncex.campaigns[ca_id].overlay_teleport_type,bouncex.campaigns[ca_id].overlay_teleport_html)}
function destroy_ad(ca_id,keepObject){unload_campaign(ca_id);close_ad(ca_id,true);if(bouncex.campaigns[ca_id].ng)jQuery("#bx-campaign-"+ca_id+",#bx-campaign-"+ca_id+"-clone").remove();else jQuery("#campaign_"+ca_id+"_container_overlay,#campaign_"+ca_id+"_container_callout,#campaign_"+ca_id+"_container_top,#campaign_"+ca_id+"_container_bottom,#campaign_"+ca_id+"_pusher_top,#campaign_"+ca_id+"_pusher_bottom").remove();if(bouncex.campaigns[ca_id]&&!keepObject){if(bouncex.campaigns[ca_id].activityTime)deleteActivityCampaignAndCleanup(ca_id);
delete bouncex.campaigns[ca_id]}}var zcCallbacks=[];function getScript(url,onsuccess){jQuery.ajax({url:url,cache:true,dataType:"script",success:onsuccess})}function clickToCopy(event){var textEl=jQuery(event.target);var originalText=textEl.text().trim();if(originalText!="Copied!"){event.originalEvent.clipboardData.setData("text/plain",originalText);event.preventDefault();textEl.text("Copied!");setTimeout(function(){textEl.text(originalText)},1E3)}else textEl.text(originalText)}
function showGenieFormErrors(ca_id,jform,response){var errors=response?response.errors:false;if(errors){var err_rows=jQuery();for(var input_name in errors)if(errors.hasOwnProperty(input_name)){var err_field=jform.find(".bx-error-"+ca_id+"-"+input_name);var err_row=err_field.text(errors[input_name]).closest(".bx-row");err_row.addClass("bx-row-validation");if(bouncex.website.ally)err_row.find(":input").attr("aria-invalid",true).attr("aria-describedby","bx-error-"+ca_id+"-"+input_name);err_rows=err_rows.add(err_row)}if(bouncex.website.ally)err_rows.eq(0).find(":input").focus();
return false}else return true}function setSubmittedCookies(ca_id){bouncex.cookie=getBounceCookie();bouncex.campaigns[ca_id].submitted=true;bouncex.cookie.campaigns[ca_id].ls=getTime2();if(bouncex.campaigns[ca_id].is_ec)bouncex.cookie.es=true;setBounceCookie()}
function processSubmittedCampaignForm(result,ca_id){setSubmittedCookies(ca_id);if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1&&bouncex.website.ibx.mibcx==1)bouncex.ibx.user(result["email"],{__src:"bouncex overlay",campaign:ca_id});reportGa(ca_id,"submission");event_js_eval(ca_id,"submission",result);if(typeof bouncex.onformsubmit=="function")bouncex.onformsubmit(result["email"]);post_submit_redirect(ca_id)}
function processCampaignSubmitClose(ca_id,noPostSubmit){if(bouncex.campaigns[ca_id].acas)bouncex.events[ca_id]["timeout_auto_submission_close"]=setTimeout(function(){bouncex.close_ad(ca_id)},bouncex.campaigns[ca_id].acas*1E3);if(noPostSubmit)bouncex.close_ad(ca_id,false,true)}
function processLastStep(ca_id,noPostSubmit){if(bouncex.campaigns[ca_id].submittedYet)return;bouncex.campaigns[ca_id].submittedYet=true;var qs=bouncex.campaigns[ca_id].obj1.find(".bx-input").serialize();var result=queryStringToObject(qs);processSubmittedCampaignForm(result,ca_id);processCampaignSubmitClose(ca_id,noPostSubmit)}
function validateForm(jform,ca_id){if(bouncex.formSubmitting)return false;else bouncex.formSubmitting=true;next_sequence_id();var isLastStep=bouncex.campaigns[ca_id].next_step==bouncex.campaigns[ca_id].numSteps&&!bouncex.campaigns[ca_id].noPostSubmit||bouncex.campaigns[ca_id].forceLastStep;var noPostSubmit=bouncex.campaigns[ca_id].current_step==bouncex.campaigns[ca_id].numSteps&&(bouncex.campaigns[ca_id].numSteps===1||bouncex.campaigns[ca_id].noPostSubmit);var last_step=isLastStep||noPostSubmit?1:
0;var serial=jform.serialize();serial+="&step="+bouncex.campaigns[ca_id].current_step+"&visit_id="+bouncex.cookie.vid+"&m="+bouncex.cookie.m+"&d="+bouncex.cookie.d;serial+="&cookie="+encodeURIComponent(bouncex.stringify(bouncex.cookie));serial+="&pos=overlay&step_name=before";serial+="&last_step="+last_step;serial+="&device_id="+bouncex.cookie.did;serial+="&cts="+getTimeMs();serial+="&pvid="+bouncex.state.pvid;serial+="&url="+bouncex.calling_url;for(var key in bouncex.vars)serial+="&var["+key+"]="+
encodeURIComponent(bouncex.vars[key]);var action=jform.attr("action");jform.find(".bx-row-validation").removeClass("bx-row-validation");if(bouncex.website.ally)jform.find('[aria-invalid="true"]').removeAttr("aria-invalid");var options={url:action,data:serial,dataType:"jsonp",contentType:"multipart/form-data",crossDomain:true,global:false,success:function(response){bouncex.formSubmitting=false;if(bouncex.events[ca_id]["edwTimeout"])clearTimeout(bouncex.events[ca_id]["edwTimeout"]);if(showGenieFormErrors(ca_id,
jform,response)){bouncex.nextStep(ca_id);if(last_step)processLastStep(ca_id,noPostSubmit)}jQuery.event.trigger({campaign_id:ca_id,isEmptyResponse:!response,response:response,stepNumber:bouncex.campaigns[ca_id].current_step,type:"bxValidateFormComplete"})},error:function(){bouncex.formSubmitting=false;bouncex.nextStep(ca_id);if(last_step);}};if(!bouncex.campaigns[ca_id].edw)bouncex.events[ca_id]["edwTimeout"]=setTimeout(function(){bouncex.nextStep(ca_id);if(last_step)processLastStep(ca_id,noPostSubmit)},
2500);jQuery.ajax(options)}function submitCampaignStep(ca_id,ca_id2){ca_id=ca_id2||ca_id;var jform=jQuery("#bx-form-"+ca_id+"-step-"+bouncex.campaigns[ca_id].current_step);if(jform.find(".bx-input").length>0)validateForm(jform,ca_id);else{report(ca_id,"click");nextStep(ca_id)}return false}function setJumpStep(ca_id,jumpStep,forceLastStep){bouncex.campaigns[ca_id].jumpStep=jumpStep;bouncex.campaigns[ca_id].forceLastStep=forceLastStep}
function nextStep(ca_id){if(bouncex.campaigns[ca_id].jumpStep){bouncex.campaigns[ca_id].next_step=bouncex.campaigns[ca_id].jumpStep;bouncex.campaigns[ca_id].jumpStep=false}if(bouncex.campaigns[ca_id].next_step<=bouncex.campaigns[ca_id].numSteps){bouncex.campaigns[ca_id].obj2.find(".bx-step-"+ca_id+"-"+bouncex.campaigns[ca_id].current_step).removeClass("bx-active-step");bouncex.campaigns[ca_id].obj2.find(".bx-step-"+ca_id+"-"+bouncex.campaigns[ca_id].next_step).addClass("bx-active-step");bouncex.campaigns[ca_id].obj2.removeClass("bx-active-step-"+
bouncex.campaigns[ca_id].current_step).addClass("bx-active-step-"+bouncex.campaigns[ca_id].next_step);bouncex.campaigns[ca_id].current_step=bouncex.campaigns[ca_id].next_step;bouncex.campaigns[ca_id].next_step++;validateCouponsSeen(ca_id);show_close(ca_id);alignCampaign(ca_id);if(bouncex.website.ally){setFocusableElements(ca_id);focusOnFirstFocusableElement(ca_id,true)}}}
function handleInputEvents(event){var input=jQuery(this);var parent=input.closest(".bx-row");switch(event.type){case "focus":parent.addClass("bx-has-focus");break;case "blur":parent.removeClass("bx-has-focus");break;case "keydown":input.css("min-height",input.outerHeight());var ignoredKeys={8:null,9:null,13:null,16:null,17:null,18:null,20:null,37:null,38:null,39:null,40:null,91:null,93:null,224:null};if(!ignoredKeys.hasOwnProperty(event.keyCode))parent.addClass("bx-has-text");break;case "change":case "paste":case "keyup":if(input.val().length>
0)parent.addClass("bx-has-text");else parent.removeClass("bx-has-text");break}}
function handleClick(e){var ca_id=e.data.ca_id;var clickedEl=jQuery(e.target);var bxClickEl=clickedEl.attr("data-click")?clickedEl:clickedEl.closest("#bx-campaign-"+ca_id+" [data-click]","#bx-campaign-"+ca_id);var clickType=bxClickEl.attr("data-click");var ignoreClicksFromThisElement=parseInt(bxClickEl.attr("data-ignore-bubbles"))&&!clickedEl.is(bxClickEl);var fbLogin=bxClickEl.attr("data-fb-login")=="1";if(bxClickEl.length===0||ignoreClicksFromThisElement)return true;e.preventDefault();e.stopPropagation();
if(clickType==="close")bouncex.close_ad(ca_id);else if(clickType==="nothing"){if(fbLogin)bouncex.fb.popCa(ca_id);bouncex.report(ca_id,"click")}else if(clickType==="hyperlink"){bouncex.report(ca_id,"click");var url=bxClickEl.attr("href");if(bxClickEl.attr("target")==="_blank"){var newWindow=window.open();newWindow.opener=null;newWindow.location=url}else setTimeout(function(){window.location.href=url},300)}else if(clickType==="trigger"){bouncex.report(ca_id,"click");var experienceToTrigger=parseInt(bxClickEl.attr("data-click-trigger"));
bouncex.show_ad(experienceToTrigger)}else if(clickType==="submit"){var jumpStep=parseInt(bxClickEl.attr("data-submit-jump"));var forceLastStep=parseInt(bxClickEl.attr("data-submit-force"));if(fbLogin)bouncex.fb.nextStep(ca_id,jumpStep,forceLastStep);else{bouncex.setJumpStep(ca_id,jumpStep,forceLastStep);jQuery("#bx-form-"+ca_id+"-step-"+bouncex.campaigns[ca_id].current_step).submit()}}}
function validateCouponsSeen(ca_id){var coupons=bouncex.campaigns[ca_id].obj1.find(".bx-step-"+bouncex.campaigns[ca_id].current_step+" .coupon:visible");coupons.each(function(i){var id=jQuery(this).attr("id");if(id&&id.substr(0,4).toLowerCase()==="cpn_")reportCouponSeen(ca_id,id.substr(4))})}function reportCouponSeen(ca_id,coupon_id){var id=parseInt(coupon_id);if(id&&(!bouncex.cookie.cpn||bouncex.cookie.cpn!==id)){bouncex.cookie.cpn=id;bouncex.report(ca_id,"coupon",{"coupon:id":id})}}
function run_timer(count_to,count_from,format,hasDays,on_complete,resetIfExpired,timer,timer_id,ca_id){var firstSeen=bouncex.cookie.campaigns[ca_id].fsa;var isRelativeTimer=count_from==="first_impression";var now=getTime2();var end=count_to-now;if(isRelativeTimer){if(resetIfExpired&&firstSeen+end<=0){firstSeen=bouncex.cookie.campaigns[ca_id].fsa=now;setBounceCookie()}end+=firstSeen}if(end<=0){clearInterval(bouncex.events[ca_id][timer_id]);end=0;if(on_complete==="close")close_ad(ca_id)}var new_timer_html=
format.replace(/{(.*?)}/gi,function(query,unit,index,string){var units=0;var operation="floor";var spanOpen='<span class="bx-timer-units bx-timer-'+unit+'">';var spanClose="</span>";var unitLabel='<span class="bx-ally-label">'+(unit==="0days"?"days":unit)+"</span>";switch(unit){case "0days":case "days":operation=string.split("{").length-1===0?"ceil":"floor";units=end/60/60/24;break;case "hours":units=hasDays?end/60/60%24:end/60/60;break;case "minutes":units=end/60%60;break;case "seconds":units=end%
60;break}units=Math[operation](units);return spanOpen+(units<10&&unit!="days"?"0"+units:units)+unitLabel+spanClose});timer.html(new_timer_html)}function by_parent_id(pid){for(var cid in bouncex.campaigns)if(bouncex.campaigns[cid].pid==pid)return cid;return null}function show_close(ca_id,force){if(bouncex.campaigns[ca_id].ng)show_close_ng(ca_id,force);else show_close_og(ca_id,force)}
function show_close_ng(ca_id,force){function swapCloseClasses(placement){bouncex.campaigns[ca_id].obj2.removeClass("bx-has-close-inside bx-has-close-outside");if(placement)bouncex.campaigns[ca_id].obj2.addClass("bx-has-close-"+placement)}var newPlacement=bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1];if(force){newPlacement=newPlacement||"outside";swapCloseClasses(newPlacement)}else if(bouncex.campaigns[ca_id].current_step===1){if(bouncex.campaigns[ca_id].close_button_delay){swapCloseClasses(false);
bouncex.events[ca_id]["timeout_close_delay"]=setTimeout(function(){swapCloseClasses(bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1]);delete bouncex.events[ca_id]["timeout_close_delay"];if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")setFocusableElements(ca_id)},bouncex.campaigns[ca_id].close_button_delay*1E3)}}else if(bouncex.campaigns[ca_id].show_close_step||!bouncex.events[ca_id]["timeout_close_delay"]){swapCloseClasses(newPlacement);if(bouncex.events[ca_id]["timeout_close_delay"]){clearTimeout(bouncex.events[ca_id]["timeout_close_delay"]);
delete bouncex.events[ca_id]["timeout_close_delay"]}}if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")setFocusableElements(ca_id)}
function show_close_og(ca_id,force){if(bouncex.campaigns[ca_id].close_button_delay||!bouncex.campaigns[ca_id].show_close){var closes;var poses=["_top","_bottom","_overlay","_callout"];if(!force)for(var index=0;index<poses.length;index++){closes=document.getElementById("bcx_close_"+ca_id+poses[index]);if(closes)closes.style.display="none"}if(bouncex.campaigns[ca_id].show_close)bouncex.events[ca_id]["timeout_close_delay"]=setTimeout(function(){for(var index=0;index<poses.length;index++){closes=document.getElementById("bcx_close_"+
ca_id+poses[index]);if(closes)closes.style.display="block"}},force?0:bouncex.campaigns[ca_id].close_button_delay*1E3)}}
function show_lightbox(ca_id){if(!bouncex.campaigns[ca_id].ngs){var ef=getCampaignTransitionEffect(ca_id).substr(0,1);var lbx=document.getElementById("campaign_"+ca_id+"_lightbox");lbx.style.backgroundColor=bouncex.campaigns[ca_id].color;lbx.style.display="block";if(ef=="r")setTimeout(function(){setOpacity(lbx,bouncex.campaigns[ca_id].opacity)},0);else setOpacity(lbx,bouncex.campaigns[ca_id].opacity)}}
function getCampaignTransitionEffect(ca_id){var sessionActivations=bouncex.campaigns[ca_id].ng?0:1;return bouncex.campaigns[ca_id][bouncex.cookie.campaigns[ca_id].as>sessionActivations?"te2":"te"]}
function show_ca_el(ca_id,element){var te=getCampaignTransitionEffect(ca_id);var ef=te.substr(0,1);if(te=="fade")fade(element,bouncex.campaigns[ca_id].tes);else if(te=="slide")slide(element,bouncex.campaigns[ca_id].tes,ca_id);else if(ef=="r"){var $el=jQuery(element);if(bouncex.campaigns[ca_id].te!=te)$el.removeClass("bcx_"+bouncex.campaigns[ca_id].te);$el.addClass("bcx_"+te);element.style.display="block";setTimeout(function(){jQuery(element).addClass("bcx_after")},123)}else element.style.display=
"block"}function center_campaign(ca_id,el){if(!bouncex.state.mobile)if(!bouncex.fs()){var valign=el.getAttribute("data-valign");var height=parseInt(getStyle(el,"height"));var type=el.getAttribute("data-type");var wsize=bouncex.wndsize();var wheight=wsize.height;el.style.position="absolute";scroll_campaign(valign,type,el,wheight,height);bouncex.window.bind("scroll",function(k,v){scroll_campaign(valign,type,el,wheight,height)})}}
function scroll_campaign(valign,type,el,wheight,height){var top=get_top();if(valign=="middle")if(type=="overlay")el.style.top=top+"px";else el.style.top=top+wheight/2-height/2+"px";else if(valign=="bottom")el.style.top=top+wheight-height+"px";else if(valign=="top")el.style.top=top+"px"}
function placeCampaign(ca_id){if(bouncex.campaigns[ca_id].ng&&(bouncex.campaigns[ca_id].type==="agilityzone"||bouncex.campaigns[ca_id].type==="annotation"))placeCallout(ca_id);else bouncex.body.append(bouncex.campaigns[ca_id].html)}
function placeCallout(ca_id){bouncex.campaigns[ca_id].calloutTarget=bouncex.campaigns[ca_id].calloutTarget||jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);bouncex.campaigns[ca_id].calloutPlacementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget||jQuery(bouncex.campaigns[ca_id].callout_pt).eq(0);var campaignBody=bouncex.campaigns[ca_id].obj1||jQuery(bouncex.campaigns[ca_id].html);if(bouncex.campaigns[ca_id].type!=="annotation")campaignBody.css({marginTop:parseInt(bouncex.campaigns[ca_id].callout_voffset)+
"px",marginLeft:parseInt(bouncex.campaigns[ca_id].callout_hoffset)+"px"});if(bouncex.campaigns[ca_id].calloutPlacementTarget.length)bouncex.campaigns[ca_id].calloutPlacementTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody);else bouncex.campaigns[ca_id].calloutTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody)}
function alignCampaign(ca_id){var hOffset=parseInt(bouncex.campaigns[ca_id].callout_hoffset)||0;var vOffset=parseInt(bouncex.campaigns[ca_id].callout_voffset)||0;if(bouncex.campaigns[ca_id].type=="nanotab"||bouncex.campaigns[ca_id].type=="conversioncorner"||bouncex.campaigns[ca_id].type=="dynamicwallpaper"||bouncex.campaigns[ca_id].type=="railbar"){if(bouncex.campaigns[ca_id].lastCalloutPos)bouncex.campaigns[ca_id].obj1.removeClass("bx-fixed-"+bouncex.campaigns[ca_id].lastCalloutPos);bouncex.campaigns[ca_id].obj1.addClass("bx-fixed-"+
bouncex.campaigns[ca_id].callout_pos);bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos;if(bouncex.campaigns[ca_id].type=="dynamicwallpaper")if(bouncex.website.content_width){var creative_width=jQuery("#bx-creative-"+ca_id).width();if(bouncex.campaigns[ca_id].header_bottom_alignment=="content_right")hOffset+=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2);else hOffset-=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2)}bouncex.campaigns[ca_id].obj1.find(".bx-slab").css("margin-left",
hOffset+"px");if(bouncex.campaigns[ca_id].callout_pos.indexOf("b")!==-1)bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-bottom",-vOffset+"px");else bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-top",vOffset+"px");if(bouncex.campaigns[ca_id].type=="dynamicwallpaper"&&bouncex.website.content_width)if(bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("right")>-1)bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({"left":"50%","margin-left":parseInt(bouncex.website.content_width/
2)+"px"});else if(bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("left")>-1)bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({"left":"auto","right":"50%","margin-right":parseInt(bouncex.website.content_width/2)+"px"})}else if(bouncex.campaigns[ca_id].type=="annotation"&&bouncex.campaigns[ca_id].calloutTarget.length){var target=bouncex.campaigns[ca_id].calloutTarget;var placement=bouncex.campaigns[ca_id].dom_placement_method;var placementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget;
var hAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(0,1);var vAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(1,2);var creative=bouncex.campaigns[ca_id].obj1.find(".bx-creative");if(!bouncex.campaigns[ca_id].obj1.hasClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos)){if(bouncex.campaigns[ca_id].lastCalloutPos)bouncex.campaigns[ca_id].obj1.removeClass("bx-annotation-"+bouncex.campaigns[ca_id].lastCalloutPos);bouncex.campaigns[ca_id].obj1.addClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos);
bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos}var targetSize={height:parseInt(target.height()),width:parseInt(target.width()),outerHeight:parseInt(target.outerHeight()),outerWidth:parseInt(target.outerWidth())};var siblingOffset={x:0,y:0};var boxAdjust={top:0,right:0,bottom:0,left:0};var placementVOffset=0;var placementHOffset=0;if(placementTarget&&placementTarget.length>0){var pt_height=parseInt(placementTarget.outerHeight());var pt_h_center=placementTarget.outerWidth()/
2+placementTarget.offset().left;var target_h_center=targetSize.outerWidth/2+target.offset().left;var pt_v_center=placementTarget.outerHeight()/2+placementTarget.offset().top;var target_v_center=targetSize.outerHeight/2+target.offset().top;var vOffset_by_placement={before:target.offset().top-placementTarget.offset().top,after:target_v_center+targetSize.outerHeight/2-(pt_v_center+pt_height/2),prepend:target.offset().top-targetSize.outerHeight/2-placementTarget.offset().top,append:target_v_center+targetSize.outerHeight-
(pt_v_center+pt_height)};placementVOffset=vOffset_by_placement[placement];placementHOffset=target_h_center-pt_h_center}if(targetSize.outerHeight-targetSize.height||targetSize.outerWidth-targetSize.width)for(var side in boxAdjust)boxAdjust[side]=parseInt(target.css("padding-"+side))+parseInt(target.css("border-"+side+"-width"));var marginLeft={l:-boxAdjust.left-targetSize.width/2,c:(boxAdjust.right-boxAdjust.left)/2,r:boxAdjust.right+targetSize.width/2}[hAlign];var marginBottom={t:boxAdjust.top,m:boxAdjust.top-
targetSize.outerHeight/2,b:-boxAdjust.bottom-targetSize.height}[vAlign];if(placement==="before"||placement==="after"){var leftRightMarginDiff=parseInt(target.css("marginLeft"))-parseInt(target.css("marginRight"));siblingOffset.x=(boxAdjust.left-boxAdjust.right+leftRightMarginDiff)/2;if(placement==="before")siblingOffset.y=-boxAdjust.top;if(placement==="after")siblingOffset.y=targetSize.height+boxAdjust.bottom+parseInt(target.css("marginBottom"))}creative.css("margin","0 0 "+(marginBottom+siblingOffset.y-
placementVOffset-vOffset)+"px "+(marginLeft+siblingOffset.x+placementHOffset+hOffset)+"px")}}
function align_callout(callout,ca_id,anim,anim_h){anim=typeof anim!=="undefined"?anim:false;var button=bouncex.campaigns[ca_id].c_button,ca=bouncex.campaigns[ca_id];var bcx_offset=button.offset();var bcx_top=parseInt(bcx_offset.top);var bcx_left=parseInt(bcx_offset.left);var cheight=parseInt(callout.height());var cwidth=parseInt(callout.width());var awidth=parseInt(button.outerWidth(false));var aheight=parseInt(button.outerHeight(false));var callout_h=ca.callout_pos.substr(0,1);var callout_v=ca.callout_pos.substr(1,
2);var anchor_h=ca.callout_anchor_pos.substr(0,1);var anchor_v=ca.callout_anchor_pos.substr(1,2);if(callout_h=="l")bcx_left+=0;else if(callout_h=="c")bcx_left-=parseInt(cwidth/2);else if(callout_h=="r")bcx_left-=cwidth;if(anchor_h=="r")bcx_left+=awidth;else if(anchor_h=="c")bcx_left+=parseInt(awidth/2);else if(anchor_h=="l")bcx_left+=0;if(callout_v=="t")bcx_top+=0;else if(callout_v=="m")bcx_top-=parseInt(cheight/2);else if(callout_v=="b")bcx_top-=cheight;if(anchor_v=="b")bcx_top+=aheight;else if(anchor_v==
"m")bcx_top+=parseInt(aheight/2);else if(anchor_v=="t")bcx_top+=0;bcx_top+=parseInt(ca.callout_voffset);bcx_left+=parseInt(ca.callout_hoffset);if(anim=="down"&&typeof anim_h!=="undefined")callout.animate({"top":bcx_top+anim_h+"px"},400);else if(anim=="up")callout.animate({"top":bcx_top-anim_h},400);else callout.css({"top":bcx_top+"px","left":bcx_left+"px"})}
function align_callout_public(ca_id){bouncex.campaigns[ca_id].c_button=jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);var callout=jQuery("#campaign_"+ca_id+"_container_callout");align_callout(callout,ca_id)}function handleIosInputTouchStart(e){var ca_id=e.data.ca_id;addIosInputFix(ca_id)}
function addIosInputFix(ca_id){if(!bouncex.campaigns[ca_id].hasIosInputFix){var scrollToTopOrBottom=bouncex.campaigns[ca_id].type==="conversionbar"?document.body.scrollHeight:0;bouncex.head.append('<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1" id="bx-ios-meta-'+ca_id+'"/>');window.scrollTo(0,scrollToTopOrBottom);bouncex.campaigns[ca_id].hasIosInputFix=true}}function handleIosInputBlur(e){var ca_id=e.data.ca_id;removeIosInputFix(ca_id)}
function removeIosInputFix(ca_id){if(bouncex.campaigns[ca_id].hasIosInputFix){jQuery("#bx-ios-meta-"+ca_id).remove();bouncex.campaigns[ca_id].hasIosInputFix=false}}function showAlly(ca_id){if(bouncex.campaigns[ca_id].type=="overlay")showAllyOverlay(ca_id);bouncex.campaigns[ca_id].obj1.attr("aria-hidden",false)}
function showAllyOverlay(ca_id){bouncex.campaigns[ca_id].tabDecoys.bind("focus.bcx_campaign_ally_"+ca_id,{ca_id:ca_id},handleTabDecoyFocus);bouncex.body.bind("keydown.bcx_campaign_ally_"+ca_id,{ca_id:ca_id},handleAllyKeyDown);bouncex.campaigns[ca_id].focusedBeforeCampaign=jQuery(document.activeElement);if(bouncex.campaigns[ca_id].focusedBeforeCampaign.is("body"))bouncex.campaigns[ca_id].focusedBeforeCampaign=bouncex.campaigns[ca_id].focusedBeforeCampaign.find("a:visible:first");bouncex.campaigns[ca_id].siblings=
bouncex.campaigns[ca_id].obj2.siblings();bouncex.campaigns[ca_id].siblings.each(function(){var el=jQuery(this);var attrsToAdd={"aria-hidden":"true","aria-live":"off"};for(var attrName in attrsToAdd)if(attrsToAdd.hasOwnProperty(attrName)){var currentAttrVal=el.attr(attrName);if(currentAttrVal)el.attr("data-bx-"+attrName,currentAttrVal);el.attr(attrName,attrsToAdd[attrName])}});setFocusableElements(ca_id)}
function hideAlly(ca_id){bouncex.campaigns[ca_id].obj1.attr("aria-hidden",true);if(bouncex.campaigns[ca_id].type=="overlay")hideAllyOverlay(ca_id)}function hideAllyOverlay(ca_id){bouncex.campaigns[ca_id].tabDecoys.unbind("focus.bcx_campaign_ally_"+ca_id,handleTabDecoyFocus);bouncex.body.unbind("keydown.bcx_campaign_ally_"+ca_id,handleAllyKeyDown);if(bouncex.campaigns[ca_id].focusedBeforeCampaign)bouncex.campaigns[ca_id].focusedBeforeCampaign.focus()}
function hideAllyOverlayPostOutro(ca_id){bouncex.campaigns[ca_id].siblings.each(function(){var el=jQuery(this);var attrsToRemove=["aria-hidden","aria-live"];for(var i=0;i<attrsToRemove.length;i++){var attr=attrsToRemove[i];var oldAttrVal=el.attr("data-bx-"+attr);if(oldAttrVal)el.attr(attr,oldAttrVal);else el.removeAttr(attr);el.removeAttr("data-bx-"+attr)}})}
function setFocusableElements(ca_id){var ca=bouncex.campaigns[ca_id];ca.focusableEls=ca.obj1.find("form, :input, a").not(":hidden, .bx-ally-tab-decoy, .bx-carb-trap")}function focusOnFirstFocusableElement(ca_id,exclude_close_btn){var ca=bouncex.campaigns[ca_id];var focusable=exclude_close_btn?ca.focusableEls.not(".bx-close-outside, .bx-close-inside"):ca.focusableEls;if(focusable.eq(0))focusable.eq(0).focus()}
function focusOnLastFocusableElement(ca_id,exclude_close_btn){var ca=bouncex.campaigns[ca_id];var focusable=exclude_close_btn?ca.focusableEls.not(".bx-close-outside, .bx-close-inside"):ca.focusableEls;if(focusable.eq(focusable.length-1))focusable.eq(focusable.length-1).focus()}function handleAllyKeyDown(e){var ca_id=e.data.ca_id;if(e.keyCode===27)bouncex.close_ad(ca_id)}
function handleTabDecoyFocus(e){var ca_id=e.data.ca_id;var ca=bouncex.campaigns[ca_id];e.stopImmediatePropagation();e.preventDefault();if(this===ca.tabDecoys.get(0))focusOnLastFocusableElement(ca_id);else if(this===ca.tabDecoys.get(1))focusOnFirstFocusableElement(ca_id)}bouncex.caAutofill=function(ca_id,data){data=typeof data==="object"?data:{};for(var characteristic in data)if(data.hasOwnProperty(characteristic))bouncex.campaigns[ca_id].inputs.filter("[name="+characteristic+"]").val(data[characteristic]).trigger("click")};
bouncex.fb={login:function(callback){callback=typeof callback==="function"?callback:function(){};if(window.FB)FB.login(function(response){if(response.authResponse)FB.api("/me",{fields:"id,email,first_name,last_name,gender,name"},function(response){response.fname=response.first_name;response.lname=response.last_name;callback(response)});else callback()},{scope:"email, public_profile"});else callback()},nextStep:function(ca_id,jump,force){bouncex.fb.login(function(response){bouncex.caAutofill(ca_id,
response);bouncex.setJumpStep(ca_id,jump,force);bouncex.submitCampaignStep(ca_id);return false})},popCa:function(ca_id){bouncex.fb.login(function(response){var timeout=0;if(response&&response.email){bouncex.campaigns[ca_id].inputs.filter("[name=email]").val("Autofilling from Facebook...").trigger("click");timeout=1500}setTimeout(function(){bouncex.caAutofill(ca_id,response)},timeout)})}};
function init_activation_funcs(){perf.times("init_activation_funcs");for(var ca_id in bouncex.campaigns){bouncex.campaigns[ca_id].activation_registry=[];bouncex.campaigns[ca_id].failed=false;bouncex.events[ca_id]=bouncex.events[ca_id]||{};if(can_show_ad(ca_id,true)&&!bouncex.campaigns[ca_id].ad_visible)(function(ca_id){var delay=0;if(bouncex.campaigns[ca_id].activation_delay)delay=calc_delay_cvt(bouncex.campaigns[ca_id].activation_delay);bouncex.events[ca_id]["timeout_activation"]=setTimeout2(function(){init_activation(ca_id)},
delay)})(ca_id)}}
function processGbiStack(stackId){var stack=bouncex.gbi.stacks[stackId];if(stack.finished){bouncex.gbi.log(false,"stack ["+stackId+"] already finished");return false}var stack=bouncex.gbi.stacks[stackId];stack.processCount=stack.processCount||0;stack.processCount++;bouncex.gbi.log(false,"processing stack ["+stackId+"] ("+stack.processCount+") ...");var stackCampaigns=stack.campaigns;stack.failedCount=0;for(var priority in stackCampaigns)if(stackCampaigns.hasOwnProperty(priority)){var ca_id=stackCampaigns[priority];
var ca=bouncex.campaigns[ca_id];if(ca.failed){stack.failedCount++;bouncex.gbi.log(ca_id,"has failed")}else if(ca.ttype=="control"&&ca_id==stack.leader_id)stack.failedCount++;else if(!ca.gbi.ready&&ca.gbi.config&&ca.gbi.config.stackWeight&&ca.gbi.config.stackWeight>stack.processCount){bouncex.gbi.log(ca_id,"campaign with weight of "+ca.gbi.config.stackWeight+" didn't have enough time");return false}else if(ca.gbi.ready){selectAdStackCampaign(ca_id);finishGbiStack(stackId,true);return true}else bouncex.gbi.log(ca_id,
"not ready ")}if(stack.failedCount===stackCampaigns.length){bouncex.gbi.log(false,"stack ["+stackId+"]: all campaigns have failed");finishGbiStack(stackId,false)}else return false;return false}
function finishGbiStack(stackId,success){bouncex.gbi.stacks[stackId].failed=false;clearInterval(bouncex.events[bouncex.gbi.stacks[stackId].leader_id]["gbiStack"]);delete bouncex.events[bouncex.gbi.stacks[stackId].leader_id]["gbiStack"];var hasControlLeader=bouncex.campaigns[bouncex.gbi.stacks[stackId].leader_id].ttype=="control";if(!success){bouncex.gbi.stacks[stackId].failed=true;if(hasControlLeader)selectAdStackCampaign(bouncex.gbi.stacks[stackId].leader_id)}bouncex.gbi.log(false,"done looking at stack ["+
stackId+"] "+(bouncex.gbi.stacks[stackId].failed?"failed":"success"))}function selectAdStackCampaign(ca_id){var stackId=bouncex.campaigns[ca_id].gbi.stack_id;bouncex.gbi.stacks[stackId].finished=true;bouncex.gbi.log(ca_id,"selected");campaignEligible(ca_id);initActivationInstruments(ca_id);bouncex.gbi.stacks[stackId].selectedCampaign=ca_id;clearGbiStackCampaigns(stackId,ca_id)}
function clearGbiStackCampaigns(stackId,winner_ca_id){bouncex.gbi.log(false,"clearing other campaigns...");var stackCampaigns=bouncex.gbi.stacks[stackId].campaigns;for(var priority in stackCampaigns)if(stackCampaigns.hasOwnProperty(priority)){var cca_id=stackCampaigns[priority];if(cca_id!=winner_ca_id){bouncex.gbi.cancelRequest(cca_id);bouncex.destroy_ad(cca_id,true)}}}
function initGbiStack(stackId,timeout){bouncex.gbi.log(false,"Starting stack ["+stackId+"]");var stack=bouncex.gbi.stacks[stackId];stack.started=true;if(!bouncex.events[stack.leader_id])bouncex.events[stack.leader_id]={};bouncex.events[stack.leader_id]["gbiStack"]=setTimeout(function(){if(processGbiStack(stackId));else if(stack.processCount>9){bouncex.gbi.log(false,"stack ["+stackId+"]: ran out of tries");finishGbiStack(stackId,false)}else if(!stack.finished){bouncex.gbi.log(false,"stack ["+stackId+
"]: no winners yet. Trying again...");initGbiStack(stackId,1E3)}},timeout)}
function init_activation(ca_id){var ca=bouncex.campaigns[ca_id];if(!ca)return false;if(isMissingTarget(ca)){ca.failed=true;return false}if(ca.html)placeCampaign(ca_id);if(bouncex.campaigns[ca_id].failed)return false;if(ca.gbi&&ca.gbi.stack_id){var stackId=ca.gbi.stack_id;if(!bouncex.gbi.stacks[stackId].started)initGbiStack(stackId)}if(ca.ng){ca.obj1=jQuery("#bx-campaign-"+ca_id);ca.obj2=jQuery(".bx-campaign-"+ca_id);if(bouncex.website.ally){if(bouncex.browser.msie&&ca.type=="overlay")ca.obj2.removeAttr("role");
ca.tabDecoys=ca.obj1.find(".bx-ally-tab-decoy")}event_js_eval(ca_id,"preactivation");if(ca.styles)bouncex.addCss(ca.styles,ca.obj1[0],"bx-campaign-"+ca_id);if(!ca.control&&!ca.noCreative){ca.transitionEffect=getCampaignTransitionEffect(ca_id);if(ca.transitionEffect&&ca.transitionEffect!=="no_effect"){ca.obj2.addClass("bx-fx-"+ca.transitionEffect);fxHelperInit(ca_id)}}var images=ca.images||[];loadImages(images,function(){if(bouncex.website.gbi_enabled&&ca.gbi&&ca.gbi.provider){bouncex.gbi.log(ca_id,
"requesting v2 ad unit");bouncex.gbi.request(ca_id)}else activate_campaign(ca_id)})}else if(ca.html){if(bouncex.website.gbi_enabled&&ca.gbi&&ca.gbi.provider){bouncex.gbi.log(ca_id,"requesting v1 ad unit");bouncex.gbi.request(ca_id)}}else activate_campaign(ca_id)}
function fxHelperInit(ca_id){if(bouncex.fxHelper)return;bouncex.fxHelper={};bouncex.fxHelper.browserSupport=getSupport(ca_id);if(bouncex.fxHelper.browserSupport!=="none")bouncex.fxHelper.animationstart=makeEventString(bouncex.fxHelper.browserSupport,"start"),bouncex.fxHelper.animationend=makeEventString(bouncex.fxHelper.browserSupport,"end"),bouncex.fxHelper.animationiteration=makeEventString(bouncex.fxHelper.browserSupport,"iteration");function getSupport(ca_id){var support="none";var creative=bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0];
creative.style.animationName="bx-feature-test";creative.style.webkitAnimationName="bx-feature-test";if(window.getComputedStyle)if(window.getComputedStyle(bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0]).animationName)support="standard";else if(window.getComputedStyle(bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0]).webkitAnimationName)support="webkit";creative.style.animationName="";creative.style.webkitAnimationName="";return support}function makeEventString(support,type){if(support===
"standard")return"animation"+type;else return"webkitAnimation"+type.charAt(0).toUpperCase()+type.slice(1)}}function loadImagesCount(count,callback){count--;if(count===0)callback();return count}
function loadImages(images,callback){var count=imagesLength=images.length;if(count)for(var k=0;k<imagesLength;k+=1)if(bouncex.browser.msie===8&&images[k].indexOf(".svg")!==-1)count=loadImagesCount(count,callback);else{if(typeof images[k]==="string"){var srcStr=images[k];if(srcStr.indexOf("http")!==0&&srcStr.indexOf("//")!==0)srcStr="//"+srcStr;var image=jQuery('<img src="'+srcStr+'"/>')}else var image=jQuery(images[k]);image.one("load",function(){count=loadImagesCount(count,callback)});if(image.length&&
image.get(0).complete)count=loadImagesCount(count,callback)}else callback()}function activate_campaign(ca_id){if(!bouncex.campaigns[ca_id]||bouncex.campaigns[ca_id].activated)return false;if(bouncex.campaigns[ca_id].gbi)if(!bouncex.website.gbi_enabled)bouncex.gbi.fail(ca_id,"incompatible extension");else if(!bouncex.campaigns[ca_id].gbi.provider)activateGbiCampaign(ca_id);else;else{campaignEligible(ca_id);activateInstruments(ca_id)}}
function activateInstruments(ca_id){if(bouncex.campaigns[ca_id].hasBehavioralCriteria){initBehavioralCriteriaInstruments(ca_id);if(onlyBehavioralCriteriaNegations(ca_id)){bouncex.campaigns[ca_id].realtimeArmed=true;initActivationInstruments(ca_id)}}else initActivationInstruments(ca_id)}function campaignEligible(ca_id){if(bouncex.campaigns[ca_id].activated)return false;bouncex.campaigns[ca_id].activated=true;report(ca_id,"eligible");event_js_eval(ca_id,"activation")}
function deactivateGbiCampaign(ca_id){if(bouncex.events[ca_id]["gbiRequest"])clearInterval(bouncex.events[ca_id]["gbiRequest"]);bouncex.gbi.log(ca_id,"deactivate gbi campaign");bouncex.campaigns[ca_id].failed=true;bouncex.campaigns[ca_id].gbi.ready=false}
function activateGbiCampaign(ca_id){if(bouncex.campaigns[ca_id].gbi.ready)return true;bouncex.gbi.log(ca_id,"activate gbi campaign");bouncex.campaigns[ca_id].gbi.ready=true;if(!bouncex.campaigns[ca_id].gbi.stack_id){bouncex.gbi.log(ca_id,"activating out of stack campaign");campaignEligible(ca_id);activateInstruments(ca_id)}else{var stackId=bouncex.campaigns[ca_id].gbi.stack_id;if(bouncex.gbi.stacks[stackId].leader_id==ca_id&&bouncex.campaigns[ca_id].ttype=="control");else{bouncex.gbi.log(ca_id,"a campaign in the stack is ready, processing stack...");
processGbiStack(stackId)}}}function initBehavioralCriteriaInstruments(ca_id){var campaign=bouncex.campaigns[ca_id];var behavioralCriteria=campaign.list_of_rt_activations||[];for(var i in behavioralCriteria)if(behavioralCriteria.hasOwnProperty(i)){var act=behavioralCriteria[i];bouncex.ca[act.activation](act.prop,act.val,ca_id,act.prop2,act.prop3,act.prop4,act.prop5,act.prop6)}}
function initActivationInstruments(ca_id){var campaign=bouncex.campaigns[ca_id];var activations=campaign.activations;for(var i in activations)if(activations.hasOwnProperty(i)){var act=activations[i];bouncex.ca[act.activation](act.prop,act.val,ca_id,act.prop2,act.prop3,act.prop4,act.prop5,act.prop6)}}function hasBehavioralCriteria(ca_id){return bouncex.campaigns[ca_id].list_of_rt_activations>0}
function onlyBehavioralCriteriaNegations(ca_id){var activations=bouncex.campaigns[ca_id].list_of_rt_activations;var criteria=bouncex.campaigns[ca_id].activations_rt;var hasNegations=activations.filter(function(instrument){return instrument.shouldBeAbsent}).length>0;if(hasNegations)if(criteria.length===1)return true;else return activations.filter(function(instrument){return!instrument.shouldBeAbsent}).length===0;return false}
function makeUniqueInstrumentId(type,params){if(!params)return type;var propKeys=["prop","val","prop2","prop3","prop4","prop5","prop6"];var id=type;var args=params.slice(0,2).concat(params.slice(3));return type+"_"+propKeys.map(function(key,i){return args[i]}).join("_")}
function getUniqueInstrumentId(activation){var ignoredKeys=["bounce","manual","control","inter","back","pers"];var propKeys=["activation","prop","val","prop2","prop3","prop4","prop5","prop6"];if(jQuery.inArray(activation.activation,ignoredKeys)!==-1)return activation.activation;else return propKeys.map(function(key){return activation[key]}).join("_")}
function addTriggerToRegistry(instrumentId,ca_id){var campaign=bouncex.campaigns[ca_id];if(jQuery.inArray(instrumentId,campaign.activation_registry)!==-1)return;campaign.activation_registry.push(instrumentId)}
function behavioralCriteriaComplete(ca_id){var campaign=bouncex.campaigns[ca_id];if(campaign.realtimeArmed)if(evaluateBehavioralCriteria(campaign.activation_registry,campaign.activations_rt,ca_id))return evaluateBehavioralTriggers(campaign.activation_registry,campaign.activations);else return false;else if(evaluateBehavioralCriteria(campaign.activation_registry,campaign.activations_rt,ca_id)){campaign.realtimeArmed=true;initActivationInstruments(ca_id);return false}else return false}
function evaluateBehavioralTriggers(triggers,criteria){for(var i=0;i<criteria.length;i++)if(jQuery.inArray(getUniqueInstrumentId(criteria[i]),triggers)!==-1)return true;return false}
function evaluateBehavioralCriteria(triggers,criteria,ca_id){var satisfied=false;var i=0;var j=0;while(i<criteria.length){var set=criteria[i];var orResults=[];while(j<set.length){var item=set[j];var index=jQuery.inArray(getUniqueInstrumentId(item),triggers);var found=index!==-1;setBehavioralCriteriaStatus(ca_id,item.activation,found);if(found)orResults.push(!item.shouldBeAbsent);else orResults.push(!!item.shouldBeAbsent);j++}satisfied=jQuery.inArray(true,orResults)!==-1;if(!satisfied)break;j=0;i++}return satisfied}
function setBehavioralCriteriaStatus(ca_id,activation,isFound){if(!isFound)return;var behavioralCriteria=bouncex.campaigns[ca_id].list_of_rt_activations;behavioralCriteria.forEach(function(criteria){if(criteria.activation!==activation)return;criteria.status=criteria.shouldBeAbsent?false:true})}
function activation_funcs(){var ca=[];ca["manual"]=function(p,v,ca_id){};ca["control"]=function(p,v,ca_id){trigger_ad("control",ca_id)};ca["inter"]=function(p,v,ca_id){if(bouncex.cookie.vpv>=p)trigger_ad("inter",ca_id)};ca["bounce"]=function(p,v,ca_id){bxBind("html,body","mouseout.bouncex_show_"+ca_id,function(obj){process_mouse_out(obj,ca_id)},ca_id);if(bouncex.browser.msie||bouncex.browser.safari&&bouncex.browser.safari<=50)bxBind("html,body","mousemove.bouncex_show_"+ca_id,function(obj){process_mouse_move(obj,
ca_id)},ca_id)};ca["iosbounce"]=function(prop,val,ca_id){if(!bouncex.browser.ios)return false;var args=Array.prototype.slice.call(arguments);var closeOnReverse=val==="yes";var browserData={previousHeight:wndsize().height,thresholdHeight:wndsize().height,previousOrientation:wndorientation(),previousPosition:bouncex.window.scrollTop(),isScrollingUp:false,touchLock:false,touchEnded:true};bxPassiveBind(window,"touchstart.bouncex_iosbounce_"+ca_id,function(evt){browserData.touchLock=true;browserData.touchEnded=
false;browserData.previousPosition=evt.pageY;browserData.thresholdHeight=wndsize().height},ca_id);bxPassiveBind(window,"touchend.bouncex_iosbounce_"+ca_id,function(evt){browserData.isScrollingUp=browserData.previousPosition<evt.pageY;browserData.touchEnded=true;clearTimeout(bouncex.events[ca_id]["touch_timeout_"+ca_id]);bouncex.events[ca_id]["touch_timeout_"+ca_id]=setIosBounceTouchTimeout(browserData)},ca_id);bxPassiveBind(window,"resize.bouncex_iosbounce_"+ca_id,function(){if(browserData.touchLock){clearTimeout(bouncex.events[ca_id]["touch_timeout_"+
ca_id]);bouncex.events[ca_id]["touch_timeout_"+ca_id]=setIosBounceTouchTimeout(browserData)}else{clearTimeout(bouncex.events[ca_id]["orientation_timeout_"+ca_id]);bouncex.events[ca_id]["orientation_timeout_"+ca_id]=setIosBounceTimeout(ca_id,browserData,closeOnReverse,args)}},ca_id)};ca["timer"]=function(p,v,ca_id){bouncex.events[ca_id]["timeout_timer"]=setTimeout2(function(){trigger_ad("timer",ca_id,[p,v])},parseInt(v)*1E3)};ca["back"]=function(p,v,ca_id){if(window.angular)return;var eligible=false;
if(p=="landing_page"){if(bouncex.state.iol)eligible=true}else eligible=true;if(eligible)if(history.pushState){if(!(history.state&&history.state.bx_rewind))if(bouncex.browser.chrome&&(bouncex.browser.iphone||bouncex.browser.ipad)){var events="touchend.bcx_rewind_fix_"+ca_id;bxBind(bouncex.body,events,function(){bouncex.body.unbind(events);history.pushState({bx_rewind:"bx_rewind1"},"","")},ca_id)}else history.pushState({bx_rewind:"bx_rewind1"},"","");bouncex.original_hash=window.location.hash;bxBind(bouncex.window,
"popstate.bcx_popstate_"+ca_id,function(event,v,k){if(!history.state&&(p!="landing_page"||!(bouncex.browser.safari&&history.state&&history.state.bx_rewind))&&(bouncex.original_hash===window.location.hash&&!(history.state&&history.state.bx_rewind))&&event.type=="popstate"){trigger_ad("back",ca_id);if(!can_show_ad(ca_id,true))bouncex.window.unbind("popstate.bcx_popstate_"+ca_id);if(bouncex.campaigns[ca_id].control)setTimeout(function(){history.back()},300)}},ca_id)}else{var bx_hash=".";var has_hash=
window.location.hash.replace("#","");if(has_hash!=bx_hash)window.location.hash=bx_hash;bouncex.events[ca_id]["timeout_rewind"]=setTimeout(function(){bxBind(bouncex.window,"hashchange.hash_"+ca_id,function(d,v,k){trigger_ad("back",ca_id);if(!can_show_ad(ca_id,true))bouncex.window.unbind("hashchange.hash_"+ca_id)},ca_id)},50)}};ca["pers"]=function(p,v,ca_id){var eligible=false;bouncex.campaigns[ca_id].is_pers=true;if(p=="landing_page"&&bouncex.state.iol)eligible=true;else if(p!="landing_page")eligible=
true;if(eligible)trigger_ad("pers",ca_id)};ca["worm"]=function(p,v,ca_id){noteCookieAdShown(ca_id);report(ca_id,"pop",{"pop:activation":"worm"});teleport("_self",v)};ca["inactivity"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);var inactivity_events="mousemove.bouncex_inactivity_"+ca_id+" keydown.bouncex_inactivity_"+ca_id+" DOMMouseScroll.bouncex_inactivity_"+ca_id+" mousewheel.bouncex_inactivity_"+ca_id+" mousedown.bouncex_inactivity_"+ca_id+" touchstart.bouncex_inactivity_"+
ca_id+" touchmove.bouncex_inactivity_"+ca_id+" focus.bouncex_inactivity_"+ca_id;bxPassiveBind(window,inactivity_events,function(){clearTimeout(bouncex.events[ca_id]["inactivity"]);bouncex.events[ca_id]["inactivity"]=setInactivityTimeout(ca_id,v,inactivity_events,args)},ca_id);bouncex.events[ca_id]["inactivity"]=setInactivityTimeout(ca_id,v,inactivity_events,args)};ca["reactivity"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);var activity_events="mousemove.bouncex_activity_"+
ca_id+" keydown.bouncex_activity_"+ca_id+" DOMMouseScroll.bouncex_activity_"+ca_id+" mousewheel.bouncex_activity_"+ca_id+" mousedown.bouncex_activity_"+ca_id+" touchstart.bouncex_activity_"+ca_id+" touchmove.bouncex_activity_"+ca_id+" focus.bouncex_activity_"+ca_id;bxPassiveBind(window,activity_events,function(){clearTimeout(bouncex.events[ca_id]["reactivity"]);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,v,activity_events,args)},ca_id);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,
v,activity_events,args)};ca["scroll"]=function(detectScrollingUp,v,ca_id,speedThreshold,closeOnReverse){var args=Array.prototype.slice.call(arguments);var docHeight=jQuery(document).height();var oldViewportHeight=bouncex.wndsize().height;var bounceBackBuffer=5;var lastPos;var lastScrolled;var targetPercentage=parseInt(v);var checkSpeedAndDirection;detectScrollingUp=detectScrollingUp===1;speedThreshold=speedThreshold?parseInt(speedThreshold):false;checkSpeedAndDirection=detectScrollingUp||speedThreshold;
closeOnReverse=!!closeOnReverse;bxBind(window,"scroll.bouncex_"+ca_id,function(event){var now=(new Date).getTime();var scroll=window.pageYOffset||document.body.scrollTop;var windowSize=bouncex.wndsize();var screenSizeChanged=windowSize.height!==oldViewportHeight;var isOverScroll=windowSize.height+scroll+bounceBackBuffer>=docHeight||scroll-bounceBackBuffer<=0;var isVisible=bouncex.campaigns[ca_id].ad_visible;var pos;var directionCriteriaMet=checkSpeedAndDirection?false:true;var percentageScrolledCriteriaMet=
false;var velocityCriteriaMet=checkSpeedAndDirection?false:true;pos=detectScrollingUp?(docHeight-windowSize.height-scroll)/(docHeight-windowSize.height)*100:(scroll+windowSize.height)/docHeight*100;percentageScrolledCriteriaMet=detectScrollingUp?pos>=targetPercentage:parseInt(pos)+targetPercentage>100&&pos>lastPos;if(checkSpeedAndDirection&&(lastScrolled===undefined||pos===undefined)){lastScrolled=now;lastPos=pos;return}if(checkSpeedAndDirection){var changeInY;var velocity;var isMovingDown;changeInY=
detectScrollingUp?(docHeight-windowSize.height)*(lastPos-pos)/100:docHeight*(pos-lastPos)/100;velocity=Math.abs(changeInY/(now-lastScrolled))*100;isMovingDown=changeInY>0;directionCriteriaMet=detectScrollingUp&&!isMovingDown||!detectScrollingUp&&isMovingDown;velocityCriteriaMet=speedThreshold?velocity>=speedThreshold:true}lastScrolled=now;lastPos=pos;oldViewportHeight=windowSize.height;if(closeOnReverse&&!screenSizeChanged&&!isOverScroll&&(isVisible&&!directionCriteriaMet||isVisible&&!percentageScrolledCriteriaMet)){close_ad(ca_id,
true);if(!can_show_ad(ca_id,true))jQuery(window).unbind("scroll.bouncex_"+ca_id)}if(velocityCriteriaMet&&percentageScrolledCriteriaMet&&directionCriteriaMet&&!screenSizeChanged&&!isOverScroll){trigger_ad("scroll",ca_id,args);if(!can_show_ad(ca_id,true)&&!closeOnReverse)jQuery(window).unbind("scroll.bouncex_"+ca_id)}},ca_id)};ca["mclick"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);if(p=="left"&&bouncex.campaigns[ca_id].overlay=="teleport"&&bouncex.campaigns[ca_id].overlay_teleport_type!==
"_self"){var handle=function(){trigger_ad("mclick",ca_id,args)};addEvent(window.document,"click",handle)}else{var handle=function(event){var keyCode=event.keyCode||event.which||event.button;if(event.button&&event.button==2)keyCode=3;if(p=="left"&&keyCode==1||p=="any")trigger_ad("mclick",ca_id,args);if(p=="right"&&keyCode==3||p=="any")trigger_ad("mclick",ca_id,args);if(!can_show_ad(ca_id,true))removeEvent(window.document,"mousedown",handle)};addEvent(window.document,"mousedown",handle)}};ca["hover"]=
function(delay,selector,ca_id,showOnUnhover){var args=Array.prototype.slice.call(arguments);delay=delay?Math.round(delay*1E3):500;showOnUnhover=showOnUnhover===1?true:false;var normalizedIdentifier=selector.replace(/\W/g,"");var $target=jQuery(selector);var show=showHover.bind(null,ca_id,normalizedIdentifier,args);var handle=handleHover.bind(null,ca_id,normalizedIdentifier,delay,selector,showOnUnhover,show);var unhandle=unhandleHover.bind(null,ca_id,normalizedIdentifier);bxBind(selector,"mouseenter.bx"+
ca_id+normalizedIdentifier,handle,ca_id);bxBind(selector,"mouseleave.bx"+ca_id+normalizedIdentifier,unhandle,ca_id);bouncex.events[ca_id]["listener_hover"+normalizedIdentifier]=function(){$target.unbind("mouseenter.bx"+ca_id+normalizedIdentifier,handle);$target.unbind("mouseleave.bx"+ca_id+normalizedIdentifier,unhandle);$target.unbind("mouseleave.bx"+ca_id+normalizedIdentifier,show)}};ca["clickon"]=function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var normalizedIdentifier=
selector.replace(/\W/g,"");var handle=function(){if(jQuery(selector).length){trigger_ad("clickon",ca_id,args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]()}};if(typeof bouncex.body.on!="undefined"){bouncex.body.on("click.bx"+ca_id+normalizedIdentifier,selector,handle);bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]=function(){bouncex.body.off("click.bx"+ca_id+normalizedIdentifier,selector,handle)}}else{bouncex.body.delegate(selector,"click.bx"+
ca_id+normalizedIdentifier,handle);bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]=function(){bouncex.body.undelegate(selector,"click.bx"+ca_id+normalizedIdentifier,handle)}}};ca["change"]=function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var normalizedIdentifier=selector.replace(/\W/g,"");var handle=function(){if(jQuery(selector).length){trigger_ad("change",ca_id,args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_change"+normalizedIdentifier]()}};
if(typeof bouncex.body.on!="undefined"){bouncex.body.on("change.bx"+ca_id+normalizedIdentifier,selector,handle);bouncex.events[ca_id]["listener_change"+normalizedIdentifier]=function(){bouncex.body.off("change.bx"+ca_id+normalizedIdentifier,selector,handle)}}else{bouncex.body.delegate(selector,"change.bx"+ca_id+normalizedIdentifier,handle);bouncex.events[ca_id]["listener_change"+normalizedIdentifier]=function(){bouncex.body.undelegate(selector,"change.bx"+ca_id+normalizedIdentifier,handle)}}};ca["waypoint"]=
function(offsetAmount,selector,campaign_id,unit,detectScrollingUp,bottomOfWindow,topOfTarget,closeOnReverse){var args=Array.prototype.slice.call(arguments);detectScrollingUp=!!detectScrollingUp;bottomOfWindow=!!bottomOfWindow;topOfTarget=!!topOfTarget;closeOnReverse=!!closeOnReverse;offsetUnitIsPercent=!!unit;offsetAmount=parseInt(offsetAmount)||0;var $element=jQuery(selector).eq(0);if($element.length){var eventName="scroll.bx.waypoint."+campaign_id+" resize.bx.waypoint."+campaign_id;var $root=bouncex.window;
var scrollTimeout=null;var lastScrollPosition=getCurrentScrollPosition($root,bottomOfWindow);var crossedWaypointUp=crossedWaypointDown=hasCrossedWaypoint=hasReversedWaypoint=isScrollingDown=isScrollingUp=false;var currentScrollPosition,elementHeight,offset,threshold;var detectCrossing=function(){elementHeight=$element.height();offset=offsetUnitIsPercent?elementHeight*offsetAmount/100:offsetAmount;threshold=$element.offset().top+offset+(topOfTarget?0:elementHeight);currentScrollPosition=getCurrentScrollPosition($root,
bottomOfWindow);isScrollingUp=currentScrollPosition<lastScrollPosition;isScrollingDown=currentScrollPosition>lastScrollPosition;crossedWaypointUp=isScrollingUp&&threshold<=lastScrollPosition&&threshold>currentScrollPosition;crossedWaypointDown=isScrollingDown&&threshold>=lastScrollPosition&&threshold<currentScrollPosition;hasCrossedWaypoint=crossedWaypointUp&&detectScrollingUp||crossedWaypointDown&&!detectScrollingUp;hasReversedWaypoint=crossedWaypointUp&&!detectScrollingUp||crossedWaypointDown&&
detectScrollingUp;if(hasCrossedWaypoint){trigger_ad("waypoint",campaign_id,args);if(!closeOnReverse&&!can_show_ad(campaign_id,true))$root.unbind(eventName)}if(hasReversedWaypoint&&closeOnReverse){close_ad(campaign_id,true);if(!can_show_ad(campaign_id,true))$root.unbind(eventName)}lastScrollPosition=getCurrentScrollPosition($root,bottomOfWindow)};bxBind(window,eventName,function(){clearTimeout(bouncex.events[campaign_id]["waypoint_debounce_timeout"]);bouncex.events[campaign_id]["waypoint_debounce_timeout"]=
setTimeout(detectCrossing,30)},campaign_id)}};ca["highlight_text"]=function(minTextLength,selector,campaign_id,bufferLength){var args=Array.prototype.slice.call(arguments);minTextLength=parseInt(minTextLength)||5;bufferLength=parseInt(bufferLength)||5;var $element=jQuery(selector).eq(0);if($element.length){var targetText=jQuery.trim($element.text().toLowerCase());var eventName="mouseup.bouncex_highlight_text_"+campaign_id;bxBind(bouncex.body,eventName,function(){var selectedText="";if(window.getSelection)selectedText=
window.getSelection().toString().toLowerCase();else if(document.selection&&document.selection.type!="Control")selectedText=document.selection.createRange().text.toLowerCase();var selectedPreBuffer=selectedText.substring(selectedText.length-minTextLength,selectedText.length);var selectedPostBuffer=selectedText.substring(0,minTextLength);if(selectedText.length>=minTextLength&&(selectedText.indexOf(targetText)>-1||targetText.indexOf(selectedText)>-1||selectedPreBuffer.length>=minTextLength&&targetText.indexOf(selectedPreBuffer)>
-1||selectedPostBuffer.length>=minTextLength&&targetText.indexOf(selectedPostBuffer)>-1)&&selectedText.length<=targetText.length+bufferLength){trigger_ad("highlight_text",campaign_id,args);if(!can_show_ad(campaign_id,true))bouncex.body.unbind(eventName)}},campaign_id)}};ca["tab_unfocus"]=function(delay,v,ca_id,triggerClick,triggerClose){var d=parseInt(delay);var args=Array.prototype.slice.call(arguments);function show_tab(){bouncex.events[ca_id]["tabunfocus_delay"]=bouncex.events[ca_id]["tabunfocus_delay"]||
setTimeout(function(){trigger_ad("tab_unfocus",ca_id,args);bxBind(window,"focus.bouncex_tabunfocus_"+ca_id,function(){bouncex.window.unbind("focus.bouncex_tabunfocus_"+ca_id);if(triggerClick==="yes")report(ca_id,"click");if(triggerClose==="yes"){clearTimeout(bouncex.events[ca_id]["tabunfocus_delay"]);delete bouncex.events[ca_id]["tabunfocus_delay"];close_ad(ca_id)}},ca_id);if(!can_show_ad(ca_id,true))bouncex.window.unbind("blur.bouncex_tabunfocus_"+ca_id)},d*1E3)}bxBind(window,"blur.bouncex_tabunfocus_"+
ca_id,show_tab,ca_id)};ca["finished_typing"]=function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var $target=jQuery(selector).eq(0);if($target.length){var normalizedIdentifier=selector.replace(/\W/g,"");bxBind(selector,"keyup.bx"+ca_id+normalizedIdentifier+", blur.bx"+ca_id+normalizedIdentifier,function(event){var inputVal=jQuery(this).val();handleFinishedTyping(event,ca_id,normalizedIdentifier,$target,args,inputVal)},ca_id)}};ca["active_time"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);
bouncex.campaigns[ca_id].activityArgs=args;bouncex.campaigns[ca_id].activityTime=v;initializeOrUpdateActivityRegister(ca_id,v);startActivityListenersAndInterval()};return ca}function handleHover(ca_id,normalizedIdentifier,delay,selector,showOnUnhover,showFn){bouncex.events[ca_id]["timeout_"+normalizedIdentifier]=setTimeout(function(){if(showOnUnhover)bxBind(selector,"mouseleave.bx"+ca_id+normalizedIdentifier,showFn,ca_id);else showFn()},delay)}
function unhandleHover(ca_id,normalizedIdentifier){clearTimeout(bouncex.events[ca_id]["timeout_"+normalizedIdentifier]);delete bouncex.events[ca_id]["timeout_"+normalizedIdentifier]}function showHover(ca_id,normalizedIdentifier,args){trigger_ad("hover",ca_id,args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_hover"+normalizedIdentifier]()}function getCurrentScrollPosition($root,bottomOfWindow){return $root.scrollTop()+(bottomOfWindow?$root.height():0)}
function setInactivityTimeout(ca_id,v,inactivity_events,args){return setTimeout(function(){trigger_ad("inactivity",ca_id,args);bxPassiveUnbind(window,inactivity_events)},v*1E3)}
function setReactivityTimeout(ca_id,v,activity_events,args){return setTimeout(function(){bxPassiveUnbind(window,activity_events);var reactivity_events="mousemove.bouncex_reactivity_"+ca_id+" keydown.bouncex_reactivity_"+ca_id+" DOMMouseScroll.bouncex_reactivity_"+ca_id+" mousewheel.bouncex_reactivity_"+ca_id+" mousedown.bouncex_reactivity_"+ca_id+" touchstart.bouncex_reactivity_"+ca_id+" touchmove.bouncex_reactivity_"+ca_id+" focus.bouncex_reactivity_"+ca_id;bxPassiveBind(window,reactivity_events,
function passiveEventsHandler(){bxPassiveUnbind(window,reactivity_events);trigger_ad("reactivity",ca_id,args);if(can_show_ad(ca_id,true))bxPassiveBind(window,activity_events,function(){clearTimeout(bouncex.events[ca_id]["reactivity"]);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,v,activity_events)},ca_id)},ca_id)},v*1E3)}
function handleFinishedTyping(event,ca_id,normalizedIdentifier,$target,args,inputVal){clearTimeout(bouncex.events[ca_id]["typing_timeout_"+normalizedIdentifier]);if(inputVal!=="")if(event.keyCode!==9&&event.keyCode!==13)bouncex.events[ca_id]["typing_timeout_"+normalizedIdentifier]=setTimeout(function(){trigger_ad("finished_typing",ca_id,args);if(!can_show_ad(ca_id,true))$target.unbind("keyup.bx"+ca_id+normalizedIdentifier+", blur.bx"+ca_id+normalizedIdentifier)},event.type==="blur"?0:1500)}
function initializeOrUpdateActivityRegister(ca_id,v){bouncex.activityCampaigns=bouncex.activityCampaigns||{};bouncex.activityCampaigns[v]=bouncex.activityCampaigns[v]||{};bouncex.activityCampaigns[v][ca_id]={}}
function startActivityListenersAndInterval(){bouncex.activeTime=bouncex.activeTime||0;bouncex.activeTimeEvents=bouncex.activeTimeEvents||"mousemove.bouncex_active_time_action keydown.bouncex_active_time_action DOMMouseScroll.bouncex_active_time_action mousewheel.bouncex_active_time_action mousedown.bouncex_active_time_action touchstart.bouncex_active_time_action touchmove.bouncex_active_time_action focus.bouncex_active_time_action";evaluateAndTriggerActivityCampaigns();if(!bouncex.activityTimerInitalized){bouncex.activityTimerInitalized=
true;bxPassiveBind(window,bouncex.activeTimeEvents,function(){visitorIsActive()})}}function visitorIsActive(){clearTimeout(bouncex.events["active_time"]);bouncex.events["active_time"]=setActivityTimeout();if(!bouncex.activityTimer)bouncex.activityTimer=setInterval(function(){bouncex.activeTime++;evaluateAndTriggerActivityCampaigns()},1E3)}
function evaluateAndTriggerActivityCampaigns(){if(bouncex.activityCampaigns[bouncex.activeTime]){var currentTimeCampaigns=bouncex.activityCampaigns[bouncex.activeTime];for(var ca_id in currentTimeCampaigns)if(currentTimeCampaigns.hasOwnProperty(ca_id)){trigger_ad("active_time",ca_id,bouncex.campaigns[ca_id].activityArgs);if(!can_show_ad(ca_id,true))deleteActivityCampaignAndCleanup(ca_id)}}}function setActivityTimeout(){return setTimeout(stopActiveTimeTimer,5E3)}
function stopActiveTimeTimer(){clearInterval(bouncex.activityTimer);bouncex.activityTimer=false}
function deleteActivityCampaignAndCleanup(ca_id){var v=bouncex.campaigns[ca_id].activityTime;if(bouncex.activityCampaigns&&bouncex.activityCampaigns[v]){if(bouncex.activityCampaigns[v][ca_id])delete bouncex.activityCampaigns[v][ca_id];if(jQuery.isEmptyObject(bouncex.activityCampaigns[v]))delete bouncex.activityCampaigns[v]}if(!bouncex.activityCampaigns||jQuery.isEmptyObject(bouncex.activityCampaigns)){stopActiveTimeTimer();bouncex.activityTimerInitalized=false;clearTimeout(bouncex.events["active_time"]);
delete bouncex.activityTimer;delete bouncex.activeTime;delete bouncex.events["active_time"];delete bouncex.activityCampaigns;bxPassiveUnbind(window,bouncex.activeTimeEvents)}}
function process_mouse_move(obj,ca_id){var alt_y=obj.layerY?obj.layerY:obj.pageY;if(alt_y-(document.body.scrollTop||document.documentElement.scrollTop)<=18)bouncex.direction="up";else bouncex.direction=false;if(bouncex.campaigns[ca_id].iao>0||bouncex.campaigns[ca_id].rao>0){var alt_x=obj.layerX?obj.layerX:obj.pageX;bouncex.lastX=alt_x>0?alt_x:1}}
function process_mouse_out(obj,ca_id){var e=obj?obj:window.event,from=e.toElement,related=e.relatedTarget,target=this,width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(!related||related!==target&&!bouncex.contains(target,related))if(!from||from.nodeName=="HTML")if(bouncex.browser.msie&&bouncex.direction=="up"){if(bouncex.campaigns[ca_id].iao>0){var alt_x=bouncex.lastX;if(alt_x<bouncex.campaigns[ca_id].iao)return false}if(bouncex.campaigns[ca_id].rao>0){var alt_x=
bouncex.lastX;if(width-alt_x<bouncex.campaigns[ca_id].rao)return false}trigger_ad("bounce",ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)}else if(!bouncex.browser.msie)if(obj.clientY<5&&obj.clientY>-50||bouncex.browser.safari&&(obj.clientY==-32768||obj.clientY==671)&&bouncex.direction=="up"){if(bouncex.campaigns[ca_id].iao>0){var alt_x=obj.layerX?obj.layerX:obj.pageX;if(alt_x<bouncex.campaigns[ca_id].iao)return false}if(bouncex.campaigns[ca_id].rao>0){var alt_x=
obj.layerX?obj.layerX:obj.pageX;if(width-alt_x<bouncex.campaigns[ca_id].rao)return false}if(bouncex.browser.chrome>40){if(!bouncex.events[ca_id]["bouncex_timeout"])bouncex.events[ca_id]["bouncex_timeout"]=setTimeout(function(){trigger_ad("bounce",ca_id);bouncex.events[ca_id]["bouncex_timeout"]=false;jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)},0);bxBind(document,"mouseenter.bx_bouncex_mousenter_"+
ca_id,function(){jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+ca_id);clearTimeout(bouncex.events[ca_id]["bouncex_timeout"]);bouncex.events[ca_id]["bouncex_timeout"]=false},ca_id)}else{trigger_ad("bounce",ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)}}}function teleport(type,url){if(type=="_blank")return window.open(url,type);return setTimeout(function(){window.open(url,type)},300)}
function setIosBounceTouchTimeout(browserData){return setTimeout(function(){if(browserData.touchEnded){if(wndsize().height>browserData.thresholdHeight)browserData.threshold=wndsize().height-browserData.thresholdHeight;browserData.touchLock=false;browserData.previousHeight=wndsize().height}},900)}
function setIosBounceTimeout(ca_id,browserData,closeOnReverse,args){return setTimeout(function(){var currentHeight=wndsize().height;if(browserData.touchLock){browserData.previousHeight=currentHeight;return}if(browserData.previousOrientation!==wndorientation()){browserData.previousOrientation=wndorientation();browserData.previousHeight=currentHeight;return}if(browserData.isScrollingUp){browserData.isScrollingUp=false;return}if(currentHeight<browserData.previousHeight&&browserData.previousHeight-currentHeight==
browserData.threshold){trigger_ad("iosbounce",ca_id,args);if(!closeOnReverse&&!can_show_ad(ca_id,true)){bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+ca_id);bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+ca_id);bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+ca_id)}}else if(closeOnReverse&&bouncex.campaigns[ca_id].ad_visible){close_ad(ca_id,true);if(!can_show_ad(ca_id,true)){bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+ca_id);bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+
ca_id);bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+ca_id)}}browserData.previousHeight=currentHeight},100)}var flash_objects={};function setTimeout2(func,delay){if(bouncex.website.fbe&&delay<1){func();return false}else return setTimeout(func,delay)}function isMissingTarget(campaign){if(campaign.type!=="annotation"&&campaign.type!=="agilityzone")return false;if(campaign.callout_t.length>0&&jQuery(campaign.callout_t).length>0)return false;return true}
function loadBounceCss(callback){perf.times("loadBounceCss");callback=typeof callback==="function"?callback:function(){};if(!bouncex.css_added){if(bouncex.website.fbe&&bouncex.v2css){bouncex.addCss(bouncex.v2css,bouncex.head[0]);callback()}else{var link=document.createElement("link");link.href=(bouncex.website.force_https?"https:":"")+bouncex.website.BCU;link.id="bcx_stylesheet";link.rel="stylesheet";link.media="all";link.type="text/css";link.onload=function(){callback()};bouncex.head[0].appendChild(link)}bouncex.css_added=
true}else callback()}function bxBind(obj,type,fn,ca_id){var obj=jQuery(obj);if(ca_id)bouncex.events[ca_id][type]=obj;obj.bind(type,fn)}function bxPassiveBind(obj,type,fn,ca_id){var types=type.split(" ");bouncex.passiveEventRegistry[type]=fn;if(ca_id)bouncex.events[ca_id][type]=function(){bxPassiveUnbind(obj,type)};for(var i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];addEvent(obj,typeWithoutNamespace,fn,true)}}
function bxPassiveUnbind(obj,type){var fn=bouncex.passiveEventRegistry[type];var types=type.split(" ");for(var i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];removeEvent(obj,typeWithoutNamespace,fn,true)}}
function addEvent(obj,type,fn,isPassive){var eventOptions=isPassive?{passive:true,capture:false}:false;if(obj.addEventListener)obj.addEventListener(type,fn,eventOptions);else if(obj.attachEvent)obj.attachEvent("on"+type,function(){fn.apply(obj,new Array(window.event))})}
function removeEvent(obj,type,fn,isPassive){var eventOptions=isPassive?{passive:true,capture:false}:false;if(obj.removeEventListener)obj.removeEventListener(type,fn,eventOptions);else if(obj.attachEvent)obj.detachEvent("on"+type,function(){return fn.apply(obj,new Array(window.event))})}function hide_flash(){flash_objects=jQuery("object,embed");flash_objects.css("visibility","hidden")}
function calc_delay_cvt(delay_time){var delay=(bouncex.cookie.cvt-getTime2()+delay_time)*1E3;return delay<0?0:delay}function fs(){if(!bouncex.browser.msie)return true;if(typeof bouncex.fixed_supported=="undefined")try{bouncex.fixed_supported=isFixedSupported()}catch(e){bouncex.fixed_supported=true}return bouncex.fixed_supported}
function isFixedSupported(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x";t.style.cssText="position:fixed;top:100px;";e.appendChild(t);var n=e.style.height,r=e.scrollTop;e.style.height="3000px";e.scrollTop=500;var i=t.getBoundingClientRect().top;e.style.height=n;var s=i===100;e.removeChild(t);e.scrollTop=r;return s}return null}
function getTime2(){var timeDiff=bouncex.server_client_time_diff?bouncex.server_client_time_diff:0;return parseInt((new Date).getTime()/1E3)+timeDiff}function getTimeMs(){return(new Date).getTime()}function zoomDisable(w){}function zoomEnable(){}function get_top(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}
function getStyle(e,t){if(e.currentStyle)var n=e.currentStyle[t];else if(window.getComputedStyle)var n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);return n}function slide(what,duration,ca_id){var mid=document.getElementById("campaign_"+ca_id+"_middle");if(mid){mid.style.display="none";bSlideDown(mid,"top")}what.style.display="block"}function fade(what,duration){jQuery(what).fadeIn(duration*10+500)}
function setOpacity(el,val){el.style.opacity=val;el.style.filter="alpha(opacity="+val*100+")"}function bSlideDown(el,prop,onsuccess){var props={};props[prop]=getStyle(el,prop);el.style[prop]=0;el.style.display="block";jQuery(el).animate(props,{duration:400,complete:function(){bouncex.window.trigger("scroll");if(typeof onsuccess!=="undefined")onsuccess()}})}
function bSlideUp(el,onsuccess){jQuery(el).animate({"height":0},{duration:400,complete:function(){el.style.display="none";bouncex.window.trigger("scroll");if(typeof onsuccess!=="undefined")onsuccess()}})}function queryStringToObject(qs){var result=[];var qsSplit=qs.split("&");for(var i=0;i<qsSplit.length;i++){var superSplit=qsSplit[i].split("=");result[superSplit[0]]=superSplit[1]?decodeURIComponent(superSplit[1].replace(/\+/g," ")):""}return result}
function getBrowserPushType(){if(navigator.serviceWorker)return"sw";else if(bouncex.browser.safari&&window.safari&&window.safari.pushNotification)return"apn";else return undefined}function getNotificationPermission(){return Notification.permission}
function googleTrustedStoresBadgeFix(ca_id){if(bouncex.campaigns[ca_id].type=="conversionbar"||bouncex.campaigns[ca_id].type=="conversioncorner"||bouncex.campaigns[ca_id].type=="liquidscreen"||bouncex.campaigns[ca_id].type=="nanobar"||bouncex.campaigns[ca_id].type=="nanotab"||bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="railbar")bouncex.addCss("body > #___ratingbadge_0 { z-index: 2147483627 !important; }",bouncex.campaigns[ca_id].obj1[0],"bx-campaign-"+ca_id+"-gts")};

		perf.times('tag');
		if(bouncex.website.sd>0 && !bouncex.website.fbe){
			setTimeout(bcx_init, bouncex.website.sd);
		} else {
			bcx_init();
		}

	})(); 
} 